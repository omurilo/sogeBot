(window.webpackJsonp=window.webpackJsonp||[]).push([[234],{1011:function(t,e,n){var map={"./af":830,"./af.js":830,"./ar":831,"./ar-dz":832,"./ar-dz.js":832,"./ar-kw":833,"./ar-kw.js":833,"./ar-ly":834,"./ar-ly.js":834,"./ar-ma":835,"./ar-ma.js":835,"./ar-sa":836,"./ar-sa.js":836,"./ar-tn":837,"./ar-tn.js":837,"./ar.js":831,"./az":838,"./az.js":838,"./be":839,"./be.js":839,"./bg":840,"./bg.js":840,"./bm":841,"./bm.js":841,"./bn":842,"./bn-bd":843,"./bn-bd.js":843,"./bn.js":842,"./bo":844,"./bo.js":844,"./br":845,"./br.js":845,"./bs":846,"./bs.js":846,"./ca":847,"./ca.js":847,"./cs":848,"./cs.js":848,"./cv":849,"./cv.js":849,"./cy":850,"./cy.js":850,"./da":851,"./da.js":851,"./de":852,"./de-at":853,"./de-at.js":853,"./de-ch":854,"./de-ch.js":854,"./de.js":852,"./dv":855,"./dv.js":855,"./el":856,"./el.js":856,"./en-au":857,"./en-au.js":857,"./en-ca":858,"./en-ca.js":858,"./en-gb":859,"./en-gb.js":859,"./en-ie":860,"./en-ie.js":860,"./en-il":861,"./en-il.js":861,"./en-in":862,"./en-in.js":862,"./en-nz":863,"./en-nz.js":863,"./en-sg":864,"./en-sg.js":864,"./eo":865,"./eo.js":865,"./es":866,"./es-do":867,"./es-do.js":867,"./es-mx":868,"./es-mx.js":868,"./es-us":869,"./es-us.js":869,"./es.js":866,"./et":870,"./et.js":870,"./eu":871,"./eu.js":871,"./fa":872,"./fa.js":872,"./fi":873,"./fi.js":873,"./fil":874,"./fil.js":874,"./fo":875,"./fo.js":875,"./fr":876,"./fr-ca":877,"./fr-ca.js":877,"./fr-ch":878,"./fr-ch.js":878,"./fr.js":876,"./fy":879,"./fy.js":879,"./ga":880,"./ga.js":880,"./gd":881,"./gd.js":881,"./gl":882,"./gl.js":882,"./gom-deva":883,"./gom-deva.js":883,"./gom-latn":884,"./gom-latn.js":884,"./gu":885,"./gu.js":885,"./he":886,"./he.js":886,"./hi":887,"./hi.js":887,"./hr":888,"./hr.js":888,"./hu":889,"./hu.js":889,"./hy-am":890,"./hy-am.js":890,"./id":891,"./id.js":891,"./is":892,"./is.js":892,"./it":893,"./it-ch":894,"./it-ch.js":894,"./it.js":893,"./ja":895,"./ja.js":895,"./jv":896,"./jv.js":896,"./ka":897,"./ka.js":897,"./kk":898,"./kk.js":898,"./km":899,"./km.js":899,"./kn":900,"./kn.js":900,"./ko":901,"./ko.js":901,"./ku":902,"./ku.js":902,"./ky":903,"./ky.js":903,"./lb":904,"./lb.js":904,"./lo":905,"./lo.js":905,"./lt":906,"./lt.js":906,"./lv":907,"./lv.js":907,"./me":908,"./me.js":908,"./mi":909,"./mi.js":909,"./mk":910,"./mk.js":910,"./ml":911,"./ml.js":911,"./mn":912,"./mn.js":912,"./mr":913,"./mr.js":913,"./ms":914,"./ms-my":915,"./ms-my.js":915,"./ms.js":914,"./mt":916,"./mt.js":916,"./my":917,"./my.js":917,"./nb":918,"./nb.js":918,"./ne":919,"./ne.js":919,"./nl":920,"./nl-be":921,"./nl-be.js":921,"./nl.js":920,"./nn":922,"./nn.js":922,"./oc-lnc":923,"./oc-lnc.js":923,"./pa-in":924,"./pa-in.js":924,"./pl":925,"./pl.js":925,"./pt":926,"./pt-br":927,"./pt-br.js":927,"./pt.js":926,"./ro":928,"./ro.js":928,"./ru":929,"./ru.js":929,"./sd":930,"./sd.js":930,"./se":931,"./se.js":931,"./si":932,"./si.js":932,"./sk":933,"./sk.js":933,"./sl":934,"./sl.js":934,"./sq":935,"./sq.js":935,"./sr":936,"./sr-cyrl":937,"./sr-cyrl.js":937,"./sr.js":936,"./ss":938,"./ss.js":938,"./sv":939,"./sv.js":939,"./sw":940,"./sw.js":940,"./ta":941,"./ta.js":941,"./te":942,"./te.js":942,"./tet":943,"./tet.js":943,"./tg":944,"./tg.js":944,"./th":945,"./th.js":945,"./tk":946,"./tk.js":946,"./tl-ph":947,"./tl-ph.js":947,"./tlh":948,"./tlh.js":948,"./tr":949,"./tr.js":949,"./tzl":950,"./tzl.js":950,"./tzm":951,"./tzm-latn":952,"./tzm-latn.js":952,"./tzm.js":951,"./ug-cn":953,"./ug-cn.js":953,"./uk":954,"./uk.js":954,"./ur":955,"./ur.js":955,"./uz":956,"./uz-latn":957,"./uz-latn.js":957,"./uz.js":956,"./vi":958,"./vi.js":958,"./x-pseudo":959,"./x-pseudo.js":959,"./yo":960,"./yo.js":960,"./zh-cn":961,"./zh-cn.js":961,"./zh-hk":962,"./zh-hk.js":962,"./zh-mo":963,"./zh-mo.js":963,"./zh-tw":964,"./zh-tw.js":964};function r(t){var e=o(t);return n(e)}function o(t){if(!n.o(map,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return map[t]}r.keys=function(){return Object.keys(map)},r.resolve=o,t.exports=r,r.id=1011},1523:function(t,e,n){"use strict";n.r(e);n(1),n(40),n(33),n(51),n(25),n(11),n(52),n(55);var r=n(35),o=(n(24),n(4),n(212),n(37),n(213),n(214),n(215),n(216),n(217),n(218),n(219),n(220),n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(39),n(31),n(82),n(73),n(8),n(34),n(47),n(119),n(12),n(5)),c=n(771),l=n(118),m=n(21),j=n(49),f=n.n(j),d=n(1010),v=n.n(d),h=n(54),y=n(3),k=n(1012),O=n(783);function w(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return z(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function z(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}y.default.use(k.a.use(v.a));var x=Object(o.c)({setup:function(){var t,e=Object(o.i)(""),n=Object(o.i)([]);Object(o.p)(n,(function(){localStorage.setItem("/stats/commandcount/showChartCommands",JSON.stringify(n.value))}));var j=Object(o.i)(Number(null!==(t=localStorage.getItem("/stats/commandcount/timeRange"))&&void 0!==t?t:0));Object(o.p)(j,(function(){localStorage.setItem("/stats/commandcount/timeRange",JSON.stringify(j.value))}));var d=Object(o.i)([]),v=Object(o.a)((function(){return Object(r.a)(new Set(d.value.map((function(t){return t.command}))))})),y=Object(o.i)([]),k=Object(o.i)({loading:c.ButtonStates.progress}),z=[{value:"command",text:Object(h.capitalize)(f()("command"))},{value:"hour",text:Object(h.capitalize)(f()("stats.commandcount.hour"))},{value:"day",text:Object(h.capitalize)(f()("stats.commandcount.day"))},{value:"week",text:Object(h.capitalize)(f()("stats.commandcount.week"))},{value:"month",text:Object(h.capitalize)(f()("stats.commandcount.month"))},{value:"year",text:Object(h.capitalize)(f()("stats.commandcount.year"))},{value:"total",text:Object(h.capitalize)(f()("stats.commandcount.total"))},{value:"button",text:"",sortable:!1}],x=function(){Object(m.getSocket)("/stats/commandcount").emit("commands::count",(function(t,e){if(t)return console.error(t);var r=localStorage.getItem("/stats/commandcount/showChartCommands");r?n.value=JSON.parse(r):(n.value=e.splice(0,5).map((function(t){return t.command})),localStorage.setItem("/stats/commandcount/showChartCommands",JSON.stringify(n.value)));var o,l=w(e.map((function(t){return t.command})));try{var m=function(){var t=o.value;d.value.find((function(e){return e.command===t}))||d.value.push({command:t,hour:S(t,36e5,e),day:S(t,864e5,e),week:S(t,6048e5,e),month:S(t,2592e6,e),year:S(t,31536e6,e),total:C(t,e)})};for(l.s();!(o=l.n()).done;)m()}catch(t){l.e(t)}finally{l.f()}y.value=e,k.value.loading=c.ButtonStates.success}))};Object(o.f)((function(){x()}));var S=function(t,e,n){return n.filter((function(n){var r=n.command===t,o=Date.now()-e<=n.timestamp;return r&&o})).length},C=function(t,e){return e.filter((function(e){return e.command===t})).length},M=Object(o.a)((function(){var t=Math.min.apply(Math,Object(r.a)(y.value.map((function(t){return t.timestamp}))));switch(j.value){case 1:return Math.max(t,Object(l.dayjs)().subtract(1,"year").valueOf());case 2:return Math.max(t,Object(l.dayjs)().subtract(6,"month").valueOf());case 3:return Math.max(t,Object(l.dayjs)().subtract(3,"month").valueOf());case 4:return Math.max(t,Object(l.dayjs)().subtract(1,"month").valueOf());case 5:return Math.max(t,Object(l.dayjs)().subtract(2,"week").valueOf());case 6:return Math.max(t,Object(l.dayjs)().subtract(1,"week").valueOf());case 7:return Math.max(t,Object(l.dayjs)().subtract(1,"day").valueOf());default:return Math.max(t,0)}})),D=Object(o.a)((function(){for(var t=Date.now(),e=[],n=M.value/I.value*I.value;n<=t/I.value*I.value;n+=I.value)e.push(n);return e})),I=Object(o.a)((function(){for(var t=Date.now(),e=[],n=M.value/18e5*18e5;n<=t/18e5*18e5;n+=18e5)e.push(n);return e.length<=48?18e5:e.length<=96?36e5:e.length<=144?72e5:e.length<=288?144e5:e.length<=576?288e5:e.length<=1008?432e5:e.length<=1440?864e5:e.length<=17520?2592e6:31104e6}));return{orderBy:h.orderBy,headers:z,search:e,items:d,state:k,getPermissionName:O.a,translate:f.a,refresh:x,capitalize:h.capitalize,toggleCommandChart:function(t){n.value.includes(t)?n.value=n.value.filter((function(e){return e!==t})):n.value.push(t)},generateChartData:function(){var t,data=[],e=Date.now(),r=w(v.value);try{var o=function(){var r=t.value;if(!n.value.includes(r))return"continue";var o,c=y.value.filter((function(t){var n=t.command===r,o=t.timestamp>=M.value,c=t.timestamp<=e;return n&&o&&c})).map((function(t){for(var n=M.value;n<=t.timestamp;)n+=I.value;return n>e&&(n=e),n})),l=Object(h.countBy)(c),m=w(D.value);try{for(m.s();!(o=m.n()).done;){var j=o.value;l[j]||(l[j]=0)}}catch(t){m.e(t)}finally{m.f()}var f,d={},v=w(Object.keys(l).sort());try{for(v.s();!(f=v.n()).done;){var k=f.value;d[new Date(Number(k)).toLocaleString()]=l[k]}}catch(t){v.e(t)}finally{v.f()}data.push({name:r,data:d})};for(r.s();!(t=r.n()).done;)o()}catch(t){r.e(t)}finally{r.f()}return data},showChartCommands:n,timeRange:j,ticksLabels:["Unlimited","An year","6 months","3 months","A month","2 weeks","1 week","1 day"],ButtonStates:c.ButtonStates}}}),S=n(45),C=n(44),M=n.n(C),D=n(27),I=n(268),N=n(30),_=n(269),A=n(140),B=n(120),component=Object(S.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{class:{"pa-4":!t.$vuetify.breakpoint.mobile},attrs:{fluid:""}},[n("v-data-table",{attrs:{loading:t.state.loading!==t.ButtonStates.success,headers:t.headers,search:t.search,items:t.items,"sort-by":"day"},scopedSlots:t._u([{key:"top",fn:function(){return[n("v-toolbar",{attrs:{flat:""}},[n("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),n("line-chart",{key:t.timeRange,staticClass:"pa-2",attrs:{data:t.generateChartData()}}),t._v(" "),n("v-slider",{attrs:{"tick-labels":t.ticksLabels,max:7,step:"1","tick-size":"4"},model:{value:t.timeRange,callback:function(e){t.timeRange=e},expression:"timeRange"}})]},proxy:!0},{key:"item.button",fn:function(e){var r=e.item;return[n("v-icon",{class:[t.showChartCommands.includes(r.command)?"red--text":"green--text"],on:{click:function(e){return t.toggleCommandChart(r.command)}}},[t._v("\n        "+t._s(t.showChartCommands.includes(r.command)?"mdi-minus":"mdi-plus")+"\n      ")])]}}],null,!0)})],1)}),[],!1,null,null,null);e.default=component.exports;M()(component,{VContainer:D.b,VDataTable:I.a,VIcon:N.a,VSlider:_.a,VTextField:A.a,VToolbar:B.a})},783:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n(73),n(4),n(71),n(33);var r=function(t,e){if(!e)throw new Error("Missing permissions list");if(!t)return"-- unset --";var n=e.find((function(e){return e.id===t}));return void 0!==n?""===n.name.trim()?n.id:n.name:null}}}]);