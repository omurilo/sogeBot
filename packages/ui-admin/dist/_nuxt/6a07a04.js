(window.webpackJsonp=window.webpackJsonp||[]).push([[212,106,112],{1046:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(26),o=(n(81),n(4),function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t){var data,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return data=e.sent,e.next=5,data.blob();case 5:return n=e.sent,e.abrupt("return",new Promise((function(e){var t=new FileReader;t.readAsDataURL(n),t.onloadend=function(){var n=t.result;e(String(n))}})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},1050:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PrivateKeysGetAll"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"privateKeys"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"clientEmail"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:84}};n.loc.source={body:"query PrivateKeysGetAll {\n  privateKeys {\n    id\n    createdAt\n    clientEmail\n  }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};function r(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){r(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){r(e,t)})),e.definitions&&e.definitions.forEach((function(e){r(e,t)}))}var o={};function c(e,t){for(var i=0;i<e.definitions.length;i++){var element=e.definitions[i];if(element.name&&element.name.value==t)return element}}n.definitions.forEach((function(e){if(e.name){var t=new Set;r(e,t),o[e.name.value]=t}})),e.exports=n,e.exports.PrivateKeysGetAll=function(e,t){var n={kind:e.kind,definitions:[c(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=o[t]||new Set,l=new Set,d=new Set;for(r.forEach((function(e){d.add(e)}));d.size>0;){var f=d;d=new Set,f.forEach((function(e){l.has(e)||(l.add(e),(o[e]||new Set).forEach((function(e){d.add(e)})))}))}return l.forEach((function(t){var r=c(e,t);r&&n.definitions.push(r)})),n}(n,"PrivateKeysGetAll")},1281:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PrivateKeyDelete"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"privateKeyDelete"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[]}]}}],loc:{start:0,end:71}};n.loc.source={body:"mutation PrivateKeyDelete($id: String!) {\n  privateKeyDelete(id: $id)\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};function r(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){r(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){r(e,t)})),e.definitions&&e.definitions.forEach((function(e){r(e,t)}))}var o={};function c(e,t){for(var i=0;i<e.definitions.length;i++){var element=e.definitions[i];if(element.name&&element.name.value==t)return element}}n.definitions.forEach((function(e){if(e.name){var t=new Set;r(e,t),o[e.name.value]=t}})),e.exports=n,e.exports.PrivateKeyDelete=function(e,t){var n={kind:e.kind,definitions:[c(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=o[t]||new Set,l=new Set,d=new Set;for(r.forEach((function(e){d.add(e)}));d.size>0;){var f=d;d=new Set,f.forEach((function(e){l.has(e)||(l.add(e),(o[e]||new Set).forEach((function(e){d.add(e)})))}))}return l.forEach((function(t){var r=c(e,t);r&&n.definitions.push(r)})),n}(n,"PrivateKeyDelete")},1282:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PrivateKeyUpload"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"data_json"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"privateKeyUpload"},arguments:[{kind:"Argument",name:{kind:"Name",value:"data"},value:{kind:"Variable",name:{kind:"Name",value:"data_json"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:100}};n.loc.source={body:"mutation PrivateKeyUpload($data_json: String!) {\n  privateKeyUpload(data: $data_json) {\n    id\n  }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};function r(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){r(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){r(e,t)})),e.definitions&&e.definitions.forEach((function(e){r(e,t)}))}var o={};function c(e,t){for(var i=0;i<e.definitions.length;i++){var element=e.definitions[i];if(element.name&&element.name.value==t)return element}}n.definitions.forEach((function(e){if(e.name){var t=new Set;r(e,t),o[e.name.value]=t}})),e.exports=n,e.exports.PrivateKeyUpload=function(e,t){var n={kind:e.kind,definitions:[c(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=o[t]||new Set,l=new Set,d=new Set;for(r.forEach((function(e){d.add(e)}));d.size>0;){var f=d;d=new Set,f.forEach((function(e){l.has(e)||(l.add(e),(o[e]||new Set).forEach((function(e){d.add(e)})))}))}return l.forEach((function(t){var r=c(e,t);r&&n.definitions.push(r)})),n}(n,"PrivateKeyUpload")},1498:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n(60),c=(n(40),n(51),n(11),n(52),n(55),n(26)),l=n(35),d=(n(81),n(37),n(39),n(73),n(4),n(25),n(69),n(492),n(320),n(33),n(28),n(8),n(771)),f=n(21),v=n(49),m=n.n(v),y=n(54),k=n(173),h=n(80),S=n(1046),_=n(770),O=n(1281),j=n.n(O),w=n(1050),x=n.n(w),E=n(1282),A=n.n(E);function D(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var K={setup:function(e,t){var n=Object(o.d)(),v=n.$graphql,O=n.$store,w=Object(r.J)([]),E=Object(r.J)([]),N=function(){v.default.request(x.a).then((function(data){return E.value=data.privateKeys}))};Object(r.Y)(E,(function(e){e&&(w.value=Object(y.cloneDeep)(Object(l.a)(e)))}),{immediate:!0,deep:!0});var K=Object(r.J)(null),V=Object(r.J)(null),P=Object(r.J)(!0),F=Object(r.J)(null),I=Object(r.J)(d.ButtonStates.idle);Object(r.Y)(K,(function(){O.commit("settings/pending",!0)}),{deep:!0}),Object(r.Y)((function(){return O.state.settings.save}),function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t){var n,r,o,c,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!K.value){e.next=37;break}Object(_.a)("/services/google",O,K.value),n=D(w.value),e.prev=3,n.s();case 5:if((r=n.n()).done){e.next=12;break}if(!(o=r.value).privateKey){e.next=10;break}return e.next=10,v.default.request(A.a,{data_json:JSON.stringify({id:o.id,clientEmail:o.clientEmail,privateKey:o.privateKey,createdAt:o.createdAt})});case 10:e.next=5;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),n.e(e.t0);case 17:return e.prev=17,n.f(),e.finish(17);case 20:c=D(E.value),e.prev=21,d=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.value,w.value.find((function(e){return e.id===t.id}))){e.next=4;break}return e.next=4,v.default.request(j.a,{id:t.id});case 4:case"end":return e.stop()}}),e)})),c.s();case 24:if((l=c.n()).done){e.next=28;break}return e.delegateYield(d(),"t1",26);case 26:e.next=24;break;case 28:e.next=33;break;case 30:e.prev=30,e.t2=e.catch(21),c.e(e.t2);case 33:return e.prev=33,c.f(),e.finish(33);case 36:N();case 37:case"end":return e.stop()}}),e,null,[[3,14,17,20],[21,30,33,36]])})));return function(t){return e.apply(this,arguments)}}()),Object(r.Y)(P,(function(e){O.commit("settings/valid",e)}),{immediate:!0}),Object(r.A)((function(){N(),Object(f.getSocket)("/services/google").emit("settings",(function(e,t,n){e?console.error(e):(V.value=n,K.value=t,Object(r.t)((function(){O.commit("settings/pending",!1)})))}))}));var T=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t){var n,r,o,c,text;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:I.value=d.ButtonStates.progress,n=D(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=25;break}return o=r.value,e.prev=8,e.next=11,Object(S.a)(URL.createObjectURL(o));case 11:if(c=e.sent.split(",")[1],(text=JSON.parse(atob(c))).client_email&&text.private_key){e.next=15;break}throw new Error("Invalid JSON file ".concat(o.name,"."));case 15:w.value=[{id:Object(k.a)(),clientEmail:text.client_email,privateKey:text.private_key,createdAt:(new Date).toISOString()}].concat(Object(l.a)(w.value)),O.commit("settings/pending",!0),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(8),console.error(e.t0),e.t0 instanceof Error&&Object(h.a)(e.t0.message);case 23:e.next=6;break;case 25:e.next=30;break;case 27:e.prev=27,e.t1=e.catch(4),n.e(e.t1);case 30:return e.prev=30,n.f(),e.finish(30);case 33:I.value=d.ButtonStates.idle;case 34:case"end":return e.stop()}}),e,null,[[4,27,30,33],[8,19]])})));return function(t){return e.apply(this,arguments)}}();return{ButtonStates:d.ButtonStates,translate:m.a,privateKeys:w,privateKeysHeaders:[{value:"id",text:"ID"},{value:"clientEmail",text:"E-mail"},{value:"createdAt",text:"Created at"},{value:"actions",text:""}],settings:K,valid:P,tab:F,uploading:I,filesChange:T,removePrivateKeyById:function(e){w.value=w.value.filter((function(t){return t.id!==e})),O.commit("settings/pending",!0)}}}},V=K,P=n(45),F=n(44),I=n.n(F),T=n(48),R=n(268),B=n(377),J=n(30),U=n(50),component=Object(P.a)(V,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.settings?n("v-form",{attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-tabs",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[n("v-tab",[e._v(e._s(e.translate("categories.keys")))])],1),e._v(" "),n("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[n("v-tab-item",{attrs:{eager:""}},[n("v-data-table",{attrs:{headers:e.privateKeysHeaders,loading:e.loading,items:e.privateKeys,"sort-by":"createdAt","sort-desc":!0},scopedSlots:e._u([{key:"item.createdAt",fn:function(t){var n=t.item;return[e._v("\n          "+e._s(new Date(n.createdAt).toLocaleString())+"\n        ")]}},{key:"item.actions",fn:function(t){var r=t.item;return[n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.removePrivateKeyById(r.id)}}},[n("v-icon",{attrs:{color:"red"}},[e._v("\n              mdi-delete\n            ")])],1)]}}],null,!0)}),e._v(" "),n("div",{staticClass:"text-center ma-auto"},[n("form",{attrs:{enctype:"multipart/form-data",novalidate:""}},[n("v-btn",{attrs:{color:"primary",loading:e.uploading===e.ButtonStates.progress},on:{click:function(t){return e.$refs.uploadFileInput.click()}}},[e._v("\n            Upload new key\n          ")]),e._v(" "),n("input",{ref:"uploadFileInput",staticClass:"d-none input-file",attrs:{type:"file",disabled:e.uploading===e.ButtonStates.progress,multiple:"",accept:"application/json"},on:{change:function(t){return e.filesChange(t.target.files)}}})],1)])],1)],1)],1):n("loading")}),[],!1,null,null,null);t.default=component.exports;I()(component,{Loading:n(769).default}),I()(component,{VBtn:T.a,VDataTable:R.a,VForm:B.a,VIcon:J.a,VTab:U.a,VTabItem:U.b,VTabs:U.c,VTabsItems:U.d})},768:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));n(12),n(25),n(69),n(4),n(24),n(40),n(33),n(51),n(37),n(11),n(52),n(55),n(39);function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,l=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){d=!0,c=e},f:function(){try{l||null==n.return||n.return()}finally{if(d)throw c}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function c(data){var e={};return function t(n,r){if(Object(n)!==n||Array.isArray(n))e[r]=n;else{for(var o=!0,c=0,l=Object.keys(n);c<l.length;c++){var p=l[c];o=!1,t(n[p],r?r+"."+p:p)}o&&r&&(e[r]={})}}(data,""),e}function l(data){var e;if(Array.isArray(data)){e=[];var t,n=r(data);try{for(n.s();!(t=n.n()).done;){var o=t.value;e.push(l(o))}}catch(e){n.e(e)}finally{n.f()}}else{e={};for(var c=function(){var i=f[d],t=i.split(".");t.reduce((function(e,n,r){return e[n]||(e[n]=isNaN(Number(t[r+1]))?t.length-1===r?data[i]:{}:[])}),e)},d=0,f=Object.keys(data);d<f.length;d++)c()}return e}},769:function(e,t,n){"use strict";n.r(t);var r=n(1),o=Object(r.h)({setup:function(){return{}}}),c=n(45),l=n(44),d=n.n(l),f=n(27),v=n(142),m=n(143),component=Object(c.a)(o,(function(){var e=this.$createElement,t=this._self._c||e;return t("v-overlay",{attrs:{absolute:""}},[t("v-row",[t("v-col",{staticClass:"text-center"},[t("v-progress-circular",{attrs:{indeterminate:"",size:"48"}})],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;d()(component,{VCol:f.a,VOverlay:v.a,VProgressCircular:m.a,VRow:f.d})},770:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(23),o=(n(133),n(12),n(34),n(47),n(25),n(62),n(103),n(21)),c=n(54),l=n(80),d=n(141),f=n(768),v=function(e,t,n){var v=Object(c.cloneDeep)(n);if(v.settings){for(var m=0,y=Object.entries(v.settings);m<y.length;m++){var k=Object(r.a)(y[m],2),h=k[0],S=k[1];delete v.settings[h],v[h]=S}delete v.settings}v=Object(f.a)(v);for(var _=0,O=Object.keys(v);_<O.length;_++){var j=O[_];if(!(j.includes("__permission_based__")||j.includes("commands")||j.includes("_permission"))){var w=v[j],x=j.replace(/([\w]*\.)/,"");delete v[j],console.debug("FROM: ".concat(j)),console.debug("TO:   ".concat(x)),v[x]=w}}if((v=Object(f.b)(v)).__permission_based__){v.__permission_based__=Object(f.a)(v.__permission_based__);for(var E=0,A=Object.keys(v.__permission_based__);E<A.length;E++){var D=A[E],N=D.match(/\./g);if(N&&1===N.length){var K=v.__permission_based__[D];delete v.__permission_based__[D];var V=D.replace(/([\w]*\.)/,"");console.debug("FROM: ".concat(D)),console.debug("TO:   ".concat(V)),v.__permission_based__[V]=K[0]}}v.__permission_based__=Object(f.b)(v.__permission_based__)}for(var P=0,F=Object.keys(v);P<F.length;P++){var I=F[P];v[I]=Array.isArray(v[I])?v[I][0]:v[I]}console.log({clonedSettings:v}),Object(o.getSocket)(e).emit("settings.update",v,(function(n){if(t.commit("settings/save",!1),t.commit("settings/pending",!1),n)return Object(l.a)(n);Object(o.getSocket)(e).emit("settings.refresh"),d.a.$emit("snack","success","Configuration updated.")}))}},771:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonStates=void 0,t.ButtonStates={idle:0,progress:1,success:2,fail:3}}}]);