(window.webpackJsonp=window.webpackJsonp||[]).push([[163,97,112,138,139],{1044:function(e,t,n){var content=n(1045);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(20).default)("3ea82465",content,!0,{sourceMap:!1})},1045:function(e,t,n){var r=n(19)((function(i){return i[1]}));r.push([e.i,".v-chip-group .v-chip{margin:4px 8px 4px 0}.v-chip-group .v-chip--active{color:inherit}.v-chip-group .v-chip--active.v-chip--no-color:after{opacity:.22}.v-chip-group .v-chip--active.v-chip--no-color:focus:after{opacity:.32}.v-chip-group .v-slide-group__content{padding:4px 0}.v-chip-group--column .v-slide-group__content{white-space:normal;flex-wrap:wrap;max-width:100%}",""]),r.locals={},e.exports=r},1077:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));n(12),n(11),n(8),n(4),n(14),n(13),n(15);var r=n(2),l=(n(1044),n(250)),o=n(41),c=n(7);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function v(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f=Object(c.a)(l.a,o.a).extend({name:"v-chip-group",provide:function(){return{chipGroup:this}},props:{column:Boolean},computed:{classes:function(){return v(v({},l.a.options.computed.classes.call(this)),{},{"v-chip-group":!0,"v-chip-group--column":this.column})}},watch:{column:function(e){e&&(this.scrollOffset=0),this.$nextTick(this.onResize)}},methods:{genData:function(){return this.setTextColor(this.color,v({},l.a.options.methods.genData.call(this)))}}})},1111:function(e,t,n){var content=n(1299);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(20).default)("5c82579c",content,!0,{sourceMap:!1})},1298:function(e,t,n){"use strict";n(1111)},1299:function(e,t,n){var r=n(19)((function(i){return i[1]}));r.push([e.i,".table-p-0 td{padding:0!important}.fitThumbnail{width:100px}",""]),r.locals={},e.exports=r},1527:function(e,t,n){"use strict";n.r(t);n(1),n(40),n(33),n(51),n(25),n(11),n(52),n(55);var r=n(26),l=n(35),o=(n(81),n(4),n(37),n(39),n(70),n(8),n(28),n(31),n(34),n(47),n(5)),c=n(771),d=n(118),v=n(21),f=n(49),m=n.n(f),h=n(777),y=n(80),_=n(141),j=n(265);function O(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,l=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw l}}}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var k=Object(o.c)({components:{"table-search-bar":Object(o.b)((function(){return Promise.resolve().then(n.bind(null,785))})),"playlist-edit":Object(o.b)((function(){return Promise.all([n.e(1),n.e(27)]).then(n.bind(null,1564))}))},filters:{formatTime:function(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),s=e%60;return[t,n>9?n:t?"0"+n:n||"0",s>9?s:"0"+s].filter((function(a){return a})).join(":")}},setup:function(){var e=Object(o.i)([]),t=Object(o.i)(""),n=Object(o.i)(!1),f=Object(o.i)([]),x=Object(o.i)([]),k=Object(o.i)({loading:c.ButtonStates.progress,import:c.ButtonStates.idle,save:c.ButtonStates.idle}),w=Object(o.i)(null),S=Object(o.i)("general"),T=Object(o.i)([]),C=Object(o.a)((function(){return[{text:"All playlists",value:null}].concat(Object(l.a)(T.value.map((function(e){return{text:S.value===e?"".concat(e," (current)"):e,value:e,disabled:!1}}))))})),I={endTime:[j.h],startTime:[j.h],volume:[j.h,Object(j.f)(0),Object(j.d)(100)]},P=Object(o.i)(1),V=Object(o.i)(0),D=Object(o.i)(15),$=Object(o.a)((function(){return e.value}));Object(o.f)((function(){M()})),Object(o.p)([w,t],(function(){P.value=1,M()})),Object(o.p)([P,t,D],(function(){M()}));var M=function(){var n=Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([new Promise((function(e,t){Object(v.getSocket)("/systems/songs").emit("current.playlist.tag",(function(n,r){n&&(Object(y.a)(n),t(n)),S.value=r,e()}))})),new Promise((function(e,t){Object(v.getSocket)("/systems/songs").emit("get.playlist.tags",(function(n,r){n&&(Object(y.a)(n),t(n)),T.value=Object(l.a)(r),e()}))})),new Promise((function(n,r){Object(v.getSocket)("/systems/songs").emit("find.playlist",{page:P.value-1,search:t.value,tag:w.value,perPage:D.value},(function(t,l,o){t&&(Object(y.a)(t),r(t));var c,d=O(l);try{for(d.s();!(c=d.n()).done;){var v=c.value;v.startTime=v.startTime?v.startTime:0,v.endTime=v.endTime?v.endTime:v.length}}catch(t){d.e(t)}finally{d.f()}V.value=o,e.value=l,n()}))}))]);case 2:k.value.loading=c.ButtonStates.success,w.value&&!T.value.includes(w.value)&&(w.value=null);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),A=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.value=!1,e.next=3,Promise.all(f.value.map((function(e){return new Promise((function(t,n){Object(v.getSocket)("/systems/songs").emit("delete.playlist",e.videoId,(function(e){e&&n(Object(y.a)(e)),t(!0)}))}))})));case 3:M(),_.a.$emit("snack","success","Data removed."),f.value=[];case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{addToSelectedItem:Object(h.a)(f,"videoId",x),items:e,fItems:$,headers:[{value:"thumbnail",text:"Thumbnail",align:"left"},{value:"videoId",text:"Video ID"},{value:"title",text:"Title"},{value:"data",text:""},{value:"tags",text:"Playlist"},{value:"actions",sortable:!1}],headersDelete:[{value:"videoId",text:""},{value:"title",text:""}],search:t,state:k,showTag:w,currentTag:S,tagsItems:C,tags:T,perPage:D,currentPage:P,count:V,saveCurrentItems:function(e){x.value=e},generateThumbnail:function(e){return"https://img.youtube.com/vi/".concat(e,"/1.jpg")},addSongOrPlaylist:function(){""!==t.value?0===k.value.import&&(k.value.import=1,Object(v.getSocket)("/systems/songs").emit(t.value.includes("playlist")?"import.playlist":"import.video",{playlist:t.value,forcedTag:w.value},(function(e){if(e)return t.value="",k.value.import=0,Object(y.a)(e);k.value.import=0,M(),t.value="",_.a.$emit("snack","success","Song added to playlist.")}))):_.a.$emit("snack","red","Cannot add empty song to ban list.")},ButtonStates:c.ButtonStates,translate:m.a,dayjs:d.dayjs,deleteDialog:n,deleteSelected:A,selected:f,rules:I,refresh:M}}}),w=k,S=(n(1298),n(45)),T=n(44),C=n.n(T),I=n(271),P=n(48),V=n(43),D=n(361),$=n(1077),M=n(27),A=n(268),K=n(379),B=n(68),E=n(30),R=n(385),L=n(266),component=Object(S.a)(w,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{class:{"pa-4":!e.$vuetify.breakpoint.mobile},attrs:{fluid:""}},[n("v-expand-transition",[e.selected.length>0?n("v-app-bar",{attrs:{color:"blue-grey darken-4",fixed:"",dense:""}},[n("v-row",{staticClass:"px-2",attrs:{dense:"",justify:"end"}},[n("v-col",{attrs:{cols:"auto","align-self":"center"}},[e._v("\n          "+e._s(e.selected.length)+" items selected\n        ")]),e._v(" "),n("v-col",{attrs:{cols:"auto","align-self":"center"}},[n("v-row",{attrs:{dense:""}},[e.selected.length>0?n("v-col",{attrs:{cols:"auto"}},[n("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,l=t.attrs;return[n("v-btn",e._g(e._b({staticClass:"error",attrs:{small:""}},"v-btn",l,!1),r),[e._v("\n                    Delete\n                  ")])]}}],null,!1,3634750311),model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[e._v(" "),n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Delete "+e._s(e.selected.length)+" Item(s)?")])]),e._v(" "),n("v-card-text",[n("v-data-table",{attrs:{dense:"",items:e.selected,headers:e.headersDelete,"items-per-page":-1,"hide-default-header":"","hide-default-footer":""}})],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{text:""},on:{click:function(t){e.deleteDialog=!1}}},[e._v("\n                      Cancel\n                    ")]),e._v(" "),n("v-btn",{attrs:{color:"error",text:""},on:{click:e.deleteSelected}},[e._v("\n                      Delete\n                    ")])],1)],1)],1)],1):e._e()],1)],1)],1)],1):e._e()],1),e._v(" "),n("alert-disabled",{attrs:{system:"songs"}}),e._v(" "),n("v-data-table",{attrs:{"calculate-widths":"","show-select":"",loading:e.state.loading!==e.ButtonStates.success,headers:e.headers,"items-per-page":e.perPage,items:e.fItems,"item-key":"videoId",page:e.currentPage,"server-items-length":e.count,"hide-default-header":""},on:{"update:itemsPerPage":function(t){e.perPage=t},"update:items-per-page":function(t){e.perPage=t},"update:page":function(t){e.currentPage=t},"update:serverItemsLength":function(t){e.count=t},"update:server-items-length":function(t){e.count=t},"current-items":e.saveCurrentItems},scopedSlots:e._u([{key:"top",fn:function(){return[n("table-search-bar",{attrs:{search:e.search,label:"Search or add by link/id"},on:{"update:search":function(t){e.search=t}}},[n("v-btn",{attrs:{color:"primary",disabled:0===e.search.length,loading:1===e.state.import},on:{click:e.addSongOrPlaylist}},[e._v("\n          New Item\n        ")])],1)]},proxy:!0},{key:"body.prepend",fn:function(t){return[n("tr",[e.$vuetify.breakpoint.mobile?e._e():n("td",{attrs:{colspan:"5"}}),e._v(" "),n("td",{class:{"v-data-table__mobile-row":e.$vuetify.breakpoint.mobile}},[n("v-select",{attrs:{items:e.tagsItems,clearable:""},model:{value:e.showTag,callback:function(t){e.showTag=t},expression:"showTag"}})],1),e._v(" "),e.$vuetify.breakpoint.mobile?e._e():n("td",{attrs:{colspan:"1"}})])]}},{key:"item",fn:function(t){var r=t.item;return[n("table-mobile",{attrs:{headers:e.headers,selected:e.selected,item:r,"add-to-selected-item":e.addToSelectedItem,"item-key":"videoId"},scopedSlots:e._u([{key:"actions",fn:function(){return[n("playlist-edit",{attrs:{rules:e.rules,value:r,"tags-items":e.tagsItems},on:{save:function(t){return e.refresh()}}}),e._v(" "),n("v-btn",{staticClass:"primary-hover",attrs:{href:"http://youtu.be/"+r.videoId,target:"_blank",icon:""}},[n("v-icon",[e._v("\n              mdi-link\n            ")])],1),e._v(" "),n("v-btn",{staticClass:"danger-hover",attrs:{icon:""},on:{click:function(t){e.selected=[r],e.deleteDialog=!0}}},[n("v-icon",[e._v("\n              mdi-delete-forever\n            ")])],1)]},proxy:!0},{key:"data",fn:function(){return[n("v-icon",[e._v("mdi-clock-outside")]),e._v(" "+e._s(e._f("formatTime")(r.length))+"\n          "),n("v-icon",[e._v("mdi-volume-high")]),e._v(" "+e._s(Number(r.volume).toFixed(1))+"%\n          "),n("v-icon",[e._v("mdi-skip-previous")]),e._v(" "+e._s(e._f("formatTime")(r.startTime))+" - "+e._s(e._f("formatTime")(r.endTime))+"\n          "),n("v-icon",[e._v("mdi-skip-next")]),e._v(" "),n("v-icon",[e._v("mdi-music")]),e._v(" "+e._s(e.dayjs(r.lastPlayedAt).format("LL"))+"\n          "+e._s(e.dayjs(r.lastPlayedAt).format("LTS"))+"\n        ")]},proxy:!0},{key:"tags",fn:function(){return[n("v-chip-group",{staticClass:"d-inline-block"},e._l(r.tags,(function(t){return n("v-chip",{key:t,staticClass:"mr-2",attrs:{color:e.showTag===t?"primary":"secondary",label:""},on:{click:function(n){e.showTag=t}}},[e._v("\n              "+e._s(t)+"\n            ")])})),1)]},proxy:!0},{key:"thumbnail",fn:function(){return[n("v-img",{attrs:{"aspect-ratio":16/9,width:100,src:e.generateThumbnail(r.videoId)}})]},proxy:!0}],null,!0)})]}}],null,!0),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)}),[],!1,null,null,null);t.default=component.exports;C()(component,{AlertDisabled:n(782).default,TableSearchBar:n(785).default,TableMobile:n(786).default}),C()(component,{VAppBar:I.a,VBtn:P.a,VCard:V.a,VCardActions:V.b,VCardText:V.d,VCardTitle:V.e,VChip:D.a,VChipGroup:$.a,VCol:M.a,VContainer:M.b,VDataTable:A.a,VDialog:K.a,VExpandTransition:B.a,VIcon:E.a,VImg:R.a,VRow:M.d,VSelect:L.a,VSpacer:M.e})},771:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonStates=void 0,t.ButtonStates={idle:0,progress:1,success:2,fail:3}},777:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(35);n(94),n(8),n(4),n(82),n(51),n(37),n(212),n(213),n(214),n(215),n(216),n(217),n(218),n(219),n(220),n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(39);function l(e,t,n){var l=null,o="select";return function(c){var d=void 0===e.value?e:e.value,v=d.findIndex((function(e){return e[t]===c[t]})),f=!1;if(window.event&&(f=!!window.event.shiftKey),f){var m=n.value.findIndex((function(e){return e[t]===l})),h=n.value.findIndex((function(e){return e[t]===c[t]}));if("select"===o)for(var i=Math.min(m,h);i<=Math.max(m,h);i++)d.push(n.value[i]);else d=d.filter((function(e){for(var t=!0,r=Math.min(m,h);r<=Math.max(m,h);r++)if(e===n.value[r]){t=!1;break}return t}))}else l=c[t],-1===v?(d.push(c),o="select"):(d.splice(v,1),o="unselect");d=Array.from(new Set(Object(r.a)(d))),console.log(d)}}},782:function(e,t,n){"use strict";n.r(t);n(73),n(4),n(33);var r=n(5),l=n(49),o=n.n(l),c=n(1),d=Object(c.h)({props:{system:String,integration:String},setup:function(e){var t=Object(r.o)();return{isEnabled:Object(c.b)((function(){return e.system?t.state.$systems.find((function(t){return t.name===e.system})).enabled:!!e.integration&&t.state.$integrations.find((function(t){return t.name===e.integration})).enabled})),translate:o.a}}}),v=n(45),f=n(44),m=n.n(f),h=n(380),component=Object(v.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isEnabled?e._e():n("v-alert",{staticClass:"mb-0",attrs:{color:"error",text:""}},[e._v("\n  "+e._s(e.translate("this-system-is-disabled"))+"\n")])}),[],!1,null,null,null);t.default=component.exports;m()(component,{VAlert:h.a})},785:function(e,t,n){"use strict";n.r(t);n(25),n(229);var r=n(1),l=Object(r.h)({props:{search:String,label:String},setup:function(e,t){var n=Object(r.J)(e.search),l=e.label?e.label:"Search";return Object(r.Y)(n,(function(e){t.emit("update:search",e)})),{searchModel:n,searchLabel:l}}}),o=n(45),c=n(44),d=n.n(c),v=n(27),f=n(134),m=n(140),component=Object(o.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-sheet",{staticClass:"my-2 pb-2 mt-0",attrs:{flat:"",color:"dark"}},[n("v-row",{staticClass:"px-2",attrs:{dense:""}},[n("v-col",{attrs:{"align-self":"center"}},[n("v-text-field",{staticClass:"pa-0 ma-2",attrs:{"append-icon":"mdi-magnify",label:e.searchLabel,"single-line":"","hide-details":""},model:{value:e.searchModel,callback:function(t){e.searchModel=t},expression:"searchModel"}})],1),e._v(" "),void 0!==e.$slots.default?n("v-col",{attrs:{cols:"auto","align-self":"center"}},[e._t("default")],2):e._e()],1)],1)}),[],!1,null,null,null);t.default=component.exports;d()(component,{VCol:v.a,VRow:v.d,VSheet:f.a,VTextField:m.a})},786:function(e,t,n){"use strict";n.r(t);var r=n(1),l=Object(r.h)({props:{selected:Array,headers:Array,item:Object,addToSelectedItem:Function,itemKey:String}}),o=n(45),c=n(44),d=n.n(c),v=n(267),component=Object(o.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.headers.length?n("tr",{class:{"v-data-table__selected":e.selected&&e.selected.some((function(t){return(e.itemKey?t[e.itemKey]:t.id)===(e.itemKey?e.item[e.itemKey]:e.item.id)})),"v-data-table__mobile-table-row":e.$vuetify.breakpoint.mobile}},[e.$vuetify.breakpoint.mobile?[n("td",{staticClass:"v-data-table__mobile-row"},[n("div",[e.selected?n("v-simple-checkbox",{attrs:{value:e.selected.some((function(t){return(e.itemKey?t[e.itemKey]:t.id)===(e.itemKey?e.item[e.itemKey]:e.item.id)}))},on:{click:function(t){return e.addToSelectedItem(e.item)}}}):e._e()],1),e._v(" "),n("div",{staticClass:"v-data-table__mobile-row__cell d-flex"},[e._t("actions")],2)]),e._v(" "),e._l(e.headers.filter((function(e){return"actions"!==e.value})),(function(header){return n("td",{key:header.value,staticClass:"v-data-table__mobile-row"},[n("div",{staticClass:"v-data-table__mobile-row__header"},[e._v("\n        "+e._s(header.text)+"\n      ")]),e._v(" "),n("div",{staticClass:"v-data-table__mobile-row__cell"},[e._t(header.value,(function(){return["boolean"==typeof e.item[header.value]?n("v-simple-checkbox",{attrs:{value:e.item[header.value],disabled:""}}):[e._v("\n            "+e._s(e.item[header.value])+"\n          ")]]}))],2)])}))]:[n("td",[n("div",{staticClass:"d-flex"},[e.selected?n("v-simple-checkbox",{attrs:{value:e.selected.some((function(t){return(e.itemKey?t[e.itemKey]:t.id)===(e.itemKey?e.item[e.itemKey]:e.item.id)}))},on:{click:function(t){return e.addToSelectedItem(e.item)}}}):e._e()],1)]),e._v(" "),e._l(e.headers.filter((function(e){return"actions"!==e.value})),(function(header){return n("td",{key:header.value,staticClass:"pa-2 mx-4",class:{"text-center":"center"===header.align,"text-right":"right"===header.align}},[e._t(header.value,(function(){return["boolean"==typeof e.item[header.value]?n("v-simple-checkbox",{attrs:{value:e.item[header.value],disabled:""}}):[e._v("\n          "+e._s(e.item[header.value])+"\n        ")]]}))],2)})),e._v(" "),n("td",[n("div",{staticClass:"d-flex",staticStyle:{"justify-content":"right"}},[e._t("actions")],2)])]],2):e._e()}),[],!1,null,null,null);t.default=component.exports;d()(component,{VSimpleCheckbox:v.b})}}]);