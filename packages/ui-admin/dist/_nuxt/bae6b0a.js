(window.webpackJsonp=window.webpackJsonp||[]).push([[80,112],{1094:function(e,t,n){var content=n(1242);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(20).default)("4475d0f0",content,!0,{sourceMap:!1})},1241:function(e,t,n){"use strict";n(1094)},1242:function(e,t,n){var r=n(19)((function(i){return i[1]}));r.push([e.i,".dividerEdit .v-small-dialog__activator__content{width:100%;transform:translateY(-4px)}",""]),r.locals={},e.exports=r},1456:function(e,t,n){"use strict";n.r(t);n(1),n(40),n(33),n(51),n(11),n(52),n(55);var r=n(2),o=n(35),l=n(26),c=(n(81),n(4),n(37),n(39),n(8),n(34),n(47),n(13),n(73),n(12),n(28),n(31),n(273),n(24),n(25),n(62),n(5)),d=n(770),v=n(118),f=n(21),m=n(49),h=n.n(m),k=n(54),_=n(173),S=n(776),y=n(80),w=n(141),x=n(266);function j(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){c=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var O=Object(c.c)({filters:{timeToDate:function(e){return new Date(e||0).toISOString().substr(0,10)},timeToTime:function(e){return Object(v.dayjs)(e).format("HH:mm:ss")}},components:{followersChip:Object(c.b)({loader:function(){return n.e(71).then(n.bind(null,1552))}}),subscribersChip:Object(c.b)({loader:function(){return n.e(72).then(n.bind(null,1553))}}),tips:Object(c.b)({loader:function(){return Promise.all([n.e(5),n.e(73)]).then(n.bind(null,1554))}}),bits:Object(c.b)({loader:function(){return Promise.all([n.e(5),n.e(69)]).then(n.bind(null,1550))}}),FilterButton:Object(c.b)({loader:function(){return n.e(70).then(n.bind(null,1551))}})},setup:function(){var e={messages:[Object(x.f)(0),x.h],points:[Object(x.f)(0),x.h],watchedTime:[Object(x.f)(0),x.h],giftedSubscribes:[Object(x.f)(0),x.h],subscribeCumulativeMonths:[Object(x.f)(0),x.h],subscribeStreak:[Object(x.f)(0),x.h]},t=Object(c.i)(Object(c.m)().value.params.id?Object(c.m)().value.params.id:""),n=Object(c.i)([]),m=Object(c.i)([]),A=Object(c.i)([]),O=Object(c.i)([]),C=Object(c.i)(!1);Object(c.p)(C,(function(e){e||(A.value=[])}));var L=Object(c.i)([]),T=Object(c.i)(!1),I=Object(c.i)(!1),B=Object(c.i)((new Date).toISOString()),D=Object(c.i)({history:d.ButtonStates.idle,forceCheckFollowedAt:d.ButtonStates.idle,loading:d.ButtonStates.progress}),F=Object(c.i)(1),V=Object(c.i)(0),$=Object(c.i)(15),M=Object(c.i)("userName"),P=Object(c.i)(!1);Object(c.p)(L,(function(e){e.length>0&&(D.value.history=d.ButtonStates.progress,Object(f.getSocket)("/overlays/eventlist").emit("eventlist::getUserEvents",e[0].userId,(function(e,t){if(e)return console.error(e);n.value=t,D.value.history=d.ButtonStates.success})))}),{deep:!0}),Object(c.p)([M,P],(function(){M.value||(M.value="userName"),void 0===P.value&&(P.value=!1)}));var filter=Object(c.i)({followers:null,subscribers:null,vips:null,active:null}),N=Object(c.a)((function(){return""===t.value?m.value:m.value.filter((function(e){var n=e.userId.toLowerCase().includes(t.value.toLowerCase()),r=e.userName.toLowerCase().includes(t.value.toLowerCase());return n||r}))}));Object(c.p)([F,M,P,filter,t,$],(function(){H()}),{deep:!0});var z=[{value:"userName",text:Object(k.capitalize)(h()("username"))},{value:"messages",text:Object(k.capitalize)(h()("messages"))},{value:"level",text:Object(k.capitalize)(h()("level"))},{value:"points",text:Object(k.capitalize)(h()("points"))},{value:"watchedTime",text:Object(k.capitalize)(h()("watched-time"))},{value:"seenAt",text:Object(k.capitalize)(h()("last-seen"))},{value:"followedAt",text:Object(k.capitalize)(h()("followed-since"))},{value:"subscribedAt",text:Object(k.capitalize)(h()("subscribed-since"))},{value:"sumTips",text:Object(k.capitalize)(h()("tips"))},{value:"sumBits",text:Object(k.capitalize)(h()("bits"))},{value:"giftedSubscribes",text:Object(k.capitalize)(h()("subgifts"))},{value:"subscribeCumulativeMonths",text:Object(k.capitalize)(h()("subCumulativeMonths"))},{value:"subscribeStreak",text:Object(k.capitalize)(h()("subStreak"))},{text:"",value:"data-table-expand"}],H=function(){D.value.loading=d.ButtonStates.progress,console.time("find.viewers"),Object(f.getSocket)("/core/users").emit("find.viewers",{perPage:$.value,page:F.value-1,order:{orderBy:M.value,sortOrder:P.value?"DESC":"ASC"},filter:filter.value,search:t.value.length>0?t.value:void 0,state:Object(_.a)()},(function(e,t,n){if(e)return console.error(e);m.value=t,V.value=n,D.value.loading=d.ButtonStates.success,A.value.length>0&&A.value.forEach((function(e,t){e=m.value.find((function(t){return t.userId===e.userId}))||e,A.value[t]=e})),console.timeEnd("find.viewers"),B.value=(new Date).toISOString()}))};Object(c.f)((function(){H()}));var Y=function(){var t=Object(l.a)(regeneratorRuntime.mark((function t(n){var l,c,d,v,m,h,k,_,S,y,x,O=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l=O.length>1&&void 0!==O[1]&&O[1],c=O.length>2?O[2]:void 0,d=0,v=Object.keys(e);case 3:if(!(d<v.length)){t.next=31;break}m=v[d],h=j(e[m]),t.prev=6,h.s();case 8:if((k=h.n()).done){t.next=20;break}if(_=k.value,!0!==(S=_(n[m]))){t.next=15;break}return t.abrupt("continue",18);case 15:return w.a.$emit("snack","red","[".concat(m,"] - ").concat(S)),H(),t.abrupt("return");case 18:t.next=8;break;case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(6),h.e(t.t0);case 25:return t.prev=25,h.f(),t.finish(25);case 28:d++,t.next=3;break;case 31:for(y=0,x=[n].concat(Object(o.a)(l?A.value:[]));y<x.length;y++)x[y][c]=n[c];return t.next=34,Promise.all([n].concat(Object(o.a)(l?A.value:[])).map((function(e){return new Promise((function(t){var o=Object(r.a)({},c,n[c]);"isFollower"===c?(o.isFollower=n.isFollower,o.haveFollowerLock=n.haveFollowerLock):"isSubscriber"===c?(o.isSubscriber=n.isSubscriber,o.haveSubscriberLock=n.haveSubscriberLock):"followedAt"===c?(o.followedAt=n.followedAt,o.haveFollowedAtLock=n.haveFollowedAtLock):"subscribedAt"===c&&(o.subscribedAt=n.subscribedAt,o.haveSubscribedAtLock=n.haveSubscribedAtLock),console.log("Updating",e.userId,o),Object(f.getSocket)("/core/users").emit("viewers::update",[e.userId,o],(function(e){e&&console.error(e),t(!0)}))}))})));case 34:H(),w.a.$emit("snack","success","Data updated.");case 36:case"end":return t.stop()}}),t,null,[[6,22,25,28]])})));return function(e){return t.apply(this,arguments)}}(),E=function(){var e=Object(l.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I.value=!1,e.next=3,Promise.all(A.value.map((function(e){return new Promise((function(t,n){Object(f.getSocket)("/core/users").emit("viewers::remove",e.userId,(function(e){e&&n(Object(y.a)(e)),t(!0)}))}))})));case 3:H(),w.a.$emit("snack","success","Data removed."),A.value=[];case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{addToSelectedItem:Object(S.a)(A,"userId",O),selectable:C,orderBy:k.orderBy,headers:z,search:t,items:m,currentPage:F,sortBy:M,perPage:$,headersDelete:[{value:"userId",text:""},{value:"userName",text:""}],sortDesc:P,count:V,state:D,selected:A,expanded:L,filter:filter,translate:h.a,rules:e,saveSuccess:function(){H(),w.a.$emit("snack","success","Data updated.")},update:Y,refresh:H,capitalize:k.capitalize,fItems:N,forceCheckFollowedAt:function(e){D.value.forceCheckFollowedAt=d.ButtonStates.progress,Object(f.getSocket)("/core/users").emit("viewers::followedAt",e.userId,(function(t,n){if(D.value.forceCheckFollowedAt=d.ButtonStates.idle,t)return"string"==typeof t&&t.includes("Not a follower")&&e&&(e.followedAt=null),console.error(t);e&&(e.followedAt=n)}))},timestamp:B,dayjs:v.dayjs,lockBackup:T,headersHistory:[{value:"timestamp",text:""},{value:"event",text:""},{value:"info",text:""}],history:n,deleteDialog:I,deleteSelected:E,saveCurrentItems:function(e){O.value=e},resetTips:function(){Object(f.getSocket)("/core/users").emit("viewers::resetTipsAll",(function(){H()}))},resetBits:function(){Object(f.getSocket)("/core/users").emit("viewers::resetBitsAll",(function(){H()}))},resetMessages:function(){Object(f.getSocket)("/core/users").emit("viewers::resetMessagesAll",(function(){H()}))},resetWatchedTime:function(){Object(f.getSocket)("/core/users").emit("viewers::resetWatchedTimeAll",(function(){H()}))},resetPoints:function(){Object(f.getSocket)("/core/users").emit("viewers::resetPointsAll",(function(){H()}))},resetSubgifts:function(){Object(f.getSocket)("/core/users").emit("viewers::resetSubgiftsAll",(function(){H()}))},watchedTimeFormat:function(e){return(e/1e3/60/60).toFixed(2)},ButtonStates:d.ButtonStates,setWatchedTime:function(e,t){e.watchedTime=1e3*Number(String(t).replace(/\s/g,""))*60*60}}}}),C=O,L=(n(1241),n(45)),T=n(44),I=n.n(T),B=n(48),D=n(43),F=n(361),V=n(27),$=n(269),M=n(378),P=n(175),N=n(30),z=n(18),H=n(145),Y=n(143),E=n(134),R=n(140),component=Object(L.a)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{class:{"pa-4":!e.$vuetify.breakpoint.mobile},attrs:{fluid:""}},[n("v-data-table",{attrs:{expanded:e.expanded,"show-select":e.selectable,loading:e.state.loading!==e.ButtonStates.success,headers:e.headers,"items-per-page":e.perPage,"sort-by":e.sortBy,"sort-desc":e.sortDesc,items:e.fItems,"item-key":"userId",page:e.currentPage,"server-items-length":e.count,"show-expand":"","single-expand":!0},on:{"update:expanded":function(t){e.expanded=t},"update:itemsPerPage":function(t){e.perPage=t},"update:items-per-page":function(t){e.perPage=t},"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t},"update:page":function(t){e.currentPage=t},"update:serverItemsLength":function(t){e.count=t},"update:server-items-length":function(t){e.count=t},"current-items":e.saveCurrentItems,"click:row":e.addToSelectedItem},scopedSlots:e._u([{key:"top",fn:function(){return[n("v-sheet",{staticClass:"my-2 pb-2 mt-0",attrs:{flat:"",color:"dark"}},[n("v-row",{staticClass:"px-2",attrs:{"no-gutters":""}},[n("v-col",{staticClass:"pr-2",attrs:{cols:"auto","align-self":"center"}},[n("v-btn",{attrs:{icon:"",color:e.selectable?"primary":"secondary"},on:{click:function(t){e.selectable=!e.selectable}}},[n("v-icon",[e._v("\n                mdi-checkbox-multiple-marked-outline\n              ")])],1),e._v(" "),n("v-menu",{staticStyle:{"max-width":"600px"},attrs:{absolute:"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,o=t.attrs;return[n("v-btn",e._g(e._b({attrs:{color:"dark"}},"v-btn",o,!1),r),[e._v("\n                  "+e._s(e.translate("commons.reset"))+"\n                ")])]}}])},[e._v(" "),n("v-list",[n("v-list-item",{on:{click:e.resetPoints}},[n("v-list-item-title",[e._v(e._s(e.translate("points")))])],1),e._v(" "),n("v-list-item",{on:{click:e.resetWatchedTime}},[n("v-list-item-title",[e._v(e._s(e.translate("watched-time")))])],1),e._v(" "),n("v-list-item",{on:{click:e.resetMessages}},[n("v-list-item-title",[e._v(e._s(e.translate("messages")))])],1),e._v(" "),n("v-list-item",{on:{click:e.resetBits}},[n("v-list-item-title",[e._v(e._s(e.translate("bits")))])],1),e._v(" "),n("v-list-item",{on:{click:e.resetTips}},[n("v-list-item-title",[e._v(e._s(e.translate("tips")))])],1),e._v(" "),n("v-list-item",{on:{click:e.resetSubgifts}},[n("v-list-item-title",[e._v(e._s(e.translate("subgifts")))])],1)],1)],1)],1),e._v(" "),n("v-col",{attrs:{"align-self":"center"}},[n("v-text-field",{staticClass:"pa-0 ma-2",attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),n("v-col",{attrs:{cols:"auto","align-self":"center"}},[n("filter-button",{attrs:{value:e.filter.followers},on:{save:function(t){return e.filter.followers=t}}},[e._v("\n              followers\n            ")]),e._v(" "),n("filter-button",{attrs:{value:e.filter.subscribers},on:{save:function(t){return e.filter.subscribers=t}}},[e._v("\n              subscribers\n            ")]),e._v(" "),n("filter-button",{attrs:{value:e.filter.vips},on:{save:function(t){return e.filter.vips=t}}},[e._v("\n              vips\n            ")]),e._v(" "),n("filter-button",{attrs:{value:e.filter.active},on:{save:function(t){return e.filter.active=t}}},[e._v("\n              active\n            ")]),e._v(" "),e.selected.length>0?[n("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,o=t.attrs;return[n("v-btn",e._g(e._b({staticClass:"mr-1",attrs:{color:"error"}},"v-btn",o,!1),r),[e._v("\n                    Delete "+e._s(e.selected.length)+" Item(s)\n                  ")])]}}],null,!1,1852500087),model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[e._v(" "),n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Delete "+e._s(e.selected.length)+" Item(s)?")])]),e._v(" "),n("v-card-text",[n("v-data-table",{attrs:{dense:"",items:e.selected,headers:e.headersDelete,"items-per-page":-1,"hide-default-header":"","hide-default-footer":""}})],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{text:""},on:{click:function(t){e.deleteDialog=!1}}},[e._v("\n                      Cancel\n                    ")]),e._v(" "),n("v-btn",{attrs:{color:"error",text:""},on:{click:e.deleteSelected}},[e._v("\n                      Delete\n                    ")])],1)],1)],1)]:e._e()],2)],1)],1)]},proxy:!0},{key:"item.userName",fn:function(t){var r=t.item;return[e._v("\n      "+e._s(r.userName)),n("small",{staticClass:"grey--text pl-2"},[e._v(e._s(r.userId))]),e._v(" "),n("div",[n("v-chip",{attrs:{"x-small":"",color:r.isOnline?"success":"error"}},[e._v("\n          Active\n        ")]),e._v(" "),n("v-chip",{attrs:{"x-small":"",color:r.isVIP?"success":"error"}},[e._v("\n          VIP\n        ")]),e._v(" "),n("div",{staticClass:"d-inline-flex"},[n("followers-chip",{key:r.userId+"follow"+e.timestamp,attrs:{item:r},on:{save:function(t){r.isFollower=t.isFollower,r.haveFollowerLock=t.haveFollowerLock,e.update(r,!0,"isFollower")},close:function(t){e.timestamp=Date.now()}}})],1),e._v(" "),n("div",{staticClass:"d-inline-flex"},[n("subscribers-chip",{key:r.userId+"sub"+e.timestamp,attrs:{item:r},on:{save:function(t){r.isSubscriber=t.isSubscriber,r.haveSubscriberLock=t.haveSubscriberLock,e.update(r,!0,"isSubscriber")},close:function(t){e.timestamp=Date.now()}}})],1)],1)]}},{key:"item.messages",fn:function(t){var r=t.item;return[n("v-edit-dialog",{attrs:{persistent:"",large:"","return-value":r.messages},on:{"update:returnValue":function(t){return e.$set(r,"messages",t)},"update:return-value":function(t){return e.$set(r,"messages",t)},save:function(t){return e.update(r,!0,"messages")}},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{type:"number",min:"0",rules:e.rules.messages,"single-line":""},model:{value:r.messages,callback:function(t){e.$set(r,"messages",e._n(t))},expression:"item.messages"}})]},proxy:!0}],null,!0)},[e._v("\n        "+e._s(r.messages)+"\n        ")])]}},{key:"item.points",fn:function(t){var r=t.item;return[n("v-edit-dialog",{attrs:{persistent:"",large:"","return-value":r.points},on:{"update:returnValue":function(t){return e.$set(r,"points",t)},"update:return-value":function(t){return e.$set(r,"points",t)},save:function(t){return e.update(r,!0,"points")}},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{type:"number",min:"0",rules:e.rules.points,"single-line":""},model:{value:r.points,callback:function(t){e.$set(r,"points",e._n(t))},expression:"item.points"}})]},proxy:!0}],null,!0)},[e._v("\n        "+e._s(r.points)+"\n        ")])]}},{key:"item.sumTips",fn:function(t){var r=t.item;return[n("tips",{attrs:{sum:r.sumTips,"user-id":r.userId},on:{save:function(t){r.tips=t,e.update(r,!1,"tips")}}})]}},{key:"item.sumBits",fn:function(t){var r=t.item;return[n("bits",{attrs:{sum:r.sumBits,"user-id":r.userId},on:{save:function(t){r.bits=t,e.update(r,!1,"bits")}}})]}},{key:"item.subscribeCumulativeMonths",fn:function(t){var r=t.item;return[n("v-edit-dialog",{attrs:{persistent:"",large:"","return-value":r.subscribeCumulativeMonths},on:{"update:returnValue":function(t){return e.$set(r,"subscribeCumulativeMonths",t)},"update:return-value":function(t){return e.$set(r,"subscribeCumulativeMonths",t)},save:function(t){return e.update(r,!0,"subscribeCumulativeMonths")}},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{type:"number",min:"0",rules:e.rules.subscribeCumulativeMonths,"single-line":""},model:{value:r.subscribeCumulativeMonths,callback:function(t){e.$set(r,"subscribeCumulativeMonths",t)},expression:"item.subscribeCumulativeMonths"}})]},proxy:!0}],null,!0)},[e._v("\n        "+e._s(r.subscribeCumulativeMonths)+"\n        ")])]}},{key:"item.subscribeStreak",fn:function(t){var r=t.item;return[n("v-edit-dialog",{attrs:{persistent:"",large:"","return-value":r.subscribeStreak},on:{"update:returnValue":function(t){return e.$set(r,"subscribeStreak",t)},"update:return-value":function(t){return e.$set(r,"subscribeStreak",t)},save:function(t){return e.update(r,!0,"subscribeStreak")}},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{type:"number",min:"0",rules:e.rules.subscribeStreak,"single-line":""},model:{value:r.subscribeStreak,callback:function(t){e.$set(r,"subscribeStreak",t)},expression:"item.subscribeStreak"}})]},proxy:!0}],null,!0)},[e._v("\n        "+e._s(r.subscribeStreak)+"\n        ")])]}},{key:"item.giftedSubscribes",fn:function(t){var r=t.item;return[n("v-edit-dialog",{attrs:{persistent:"",large:"","return-value":r.giftedSubscribes},on:{"update:returnValue":function(t){return e.$set(r,"giftedSubscribes",t)},"update:return-value":function(t){return e.$set(r,"giftedSubscribes",t)},save:function(t){return e.update(r,!0,"giftedSubscribes")}},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{type:"number",min:"0",rules:e.rules.giftedSubscribes,"single-line":""},model:{value:r.giftedSubscribes,callback:function(t){e.$set(r,"giftedSubscribes",t)},expression:"item.giftedSubscribes"}})]},proxy:!0}],null,!0)},[e._v("\n        "+e._s(r.giftedSubscribes)+"\n        ")])]}},{key:"item.watchedTime",fn:function(t){var r=t.item;return[n("v-edit-dialog",{attrs:{persistent:"",large:"","return-value":r.watchedTime},on:{"update:returnValue":function(t){return e.$set(r,"watchedTime",t)},"update:return-value":function(t){return e.$set(r,"watchedTime",t)},save:function(t){return e.update(r,!0,"watchedTime")}},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{value:e.watchedTimeFormat(r.watchedTime),type:"number",min:"0",step:"0.5",rules:e.rules.watchedTime,"single-line":"",suffix:"h"},on:{blur:function(t){return e.setWatchedTime(r,t.target._value)}}})]},proxy:!0}],null,!0)},[e._v("\n        "+e._s(Intl.NumberFormat(e.$store.state.configuration.lang,{minimumFractionDigits:2,maximumFractionDigits:2}).format(r.watchedTime/1e3/60/60))+"h\n        ")])]}},{key:"item.seenAt",fn:function(t){var r=t.item;return[n("div",{staticClass:"dividerEdit"},[n("v-edit-dialog",{attrs:{persistent:"",large:"","return-value":r.seenAt},on:{"update:returnValue":function(t){return e.$set(r,"seenAt",t)},"update:return-value":function(t){return e.$set(r,"seenAt",t)},save:function(t){return e.update(r,!0,"seenAt")}},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{type:"datetime-local",step:"1",clearable:"",value:r.seenAt?e.dayjs(r.seenAt).format("YYYY-MM-DDTHH:mm"):null},on:{input:function(t){r.seenAt=t?e.dayjs(t).toISOString():null}}})]},proxy:!0}],null,!0)},[r.seenAt?[e._v("\n            "+e._s(e.dayjs(r.seenAt).format("LL"))+" "+e._s(e.dayjs(r.seenAt).format("LTS"))+"\n          ")]:n("v-divider",{staticClass:"px-4"})],2)],1)]}},{key:"item.followedAt",fn:function(t){var r=t.item;return[n("div",{staticClass:"dividerEdit"},[n("v-edit-dialog",{attrs:{persistent:"",large:"","return-value":r.followedAt},on:{"update:returnValue":function(t){return e.$set(r,"followedAt",t)},"update:return-value":function(t){return e.$set(r,"followedAt",t)},open:function(t){e.lockBackup=r.haveFollowedAtLock},close:function(t){r.haveFollowedAtLock=e.lockBackup},save:function(t){return e.update(r,!0,"followedAt")}},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{type:"datetime-local",step:"1",clearable:"",value:r.followedAt?e.dayjs(r.followedAt).format("YYYY-MM-DDTHH:mm"):null},on:{input:function(t){r.followedAt=t?e.dayjs(t).toISOString():null}},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("v-btn",{attrs:{color:r.haveFollowedAtLock?"success":"error",icon:""},on:{click:function(e){r.haveFollowedAtLock=!r.haveFollowedAtLock}}},[n("v-icon",[e._v(e._s(r.haveFollowedAtLock?"mdi-lock":"mdi-lock-off"))])],1),e._v(" "),n("v-btn",{attrs:{icon:"",disabled:e.state.forceCheckFollowedAt!==e.ButtonStates.idle},on:{click:function(t){return e.forceCheckFollowedAt(r)}}},[e.state.forceCheckFollowedAt!==e.ButtonStates.idle?n("v-progress-circular",{attrs:{indeterminate:""}}):n("v-icon",[e._v("\n                    mdi-refresh\n                  ")])],1)]},proxy:!0}],null,!0)})]},proxy:!0}],null,!0)},[r.followedAt?[r.haveFollowedAtLock?n("v-icon",{attrs:{"x-small":""}},[e._v("\n              mdi-lock\n            ")]):e._e(),e._v("\n            "+e._s(e.dayjs(String(r.followedAt)).format("LL"))+" "+e._s(e.dayjs(String(r.followedAt)).format("LTS"))+"\n          ")]:n("v-divider",{staticClass:"px-4"})],2)],1)]}},{key:"item.subscribedAt",fn:function(t){var r=t.item;return[n("div",{staticClass:"dividerEdit"},[n("v-edit-dialog",{attrs:{persistent:"",large:"","return-value":r.subscribedAt},on:{"update:returnValue":function(t){return e.$set(r,"subscribedAt",t)},"update:return-value":function(t){return e.$set(r,"subscribedAt",t)},open:function(t){e.lockBackup=r.haveSubscribedAtLock},close:function(t){r.haveSubscribedAtLock=e.lockBackup},save:function(t){return e.update(r,!0,"subscribedAt")}},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{type:"datetime-local",step:"1",clearable:"",value:r.subscribedAt?e.dayjs(r.subscribedAt).format("YYYY-MM-DDTHH:mm"):null},on:{input:function(t){r.subscribedAt=t?e.dayjs(t).toISOString():null}},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("v-btn",{attrs:{color:r.havesubscribedAtLock?"success":"error",icon:""},on:{click:function(e){r.havesubscribedAtLock=!r.havesubscribedAtLock}}},[n("v-icon",[e._v(e._s(r.havesubscribedAtLock?"mdi-lock":"mdi-lock-off"))])],1)]},proxy:!0}],null,!0)})]},proxy:!0}],null,!0)},[r.subscribedAt?[r.haveSubscribedAtLock?n("v-icon",{attrs:{"x-small":""}},[e._v("\n              mdi-lock\n            ")]):e._e(),e._v("\n            "+e._s(e.dayjs(r.subscribedAt).format("LL"))+" "+e._s(e.dayjs(r.subscribedAt).format("LTS"))+"\n          ")]:n("v-divider",{staticClass:"px-4"})],2)],1)]}},{key:"expanded-item",fn:function(t){var r=t.headers,o=t.item;return[n("td",{staticClass:"pa-2",attrs:{colspan:r.length}},[n("v-container",[n("v-data-table",{attrs:{dense:"",items:e.history,loading:e.state.history!==e.ButtonStates.success,"hide-default-header":"",headers:e.headersHistory,"sort-desc":!0,"sort-by":"timestamp","items-per-page":10},scopedSlots:e._u([{key:"top",fn:function(){return[n("h3",[e._v("History")])]},proxy:!0},{key:"item.timestamp",fn:function(t){var n=t.item;return[e._v("\n              "+e._s(e.dayjs(n.timestamp).format("LL"))+" "+e._s(e.dayjs(n.timestamp).format("LTS"))+"\n            ")]}},{key:"item.info",fn:function(t){var r=t.item;return["raid"===r.event||"host"===r.event?[e._v("\n                "+e._s(e.translate("managers.viewers.hostAndRaidViewersCount").replace("$value",JSON.parse(r.values_json).viewers))+"\n              ")]:"subcommunitygift"===r.event?[n("strong",[e._v(e._s(r.event)+" - "+e._s(JSON.parse(r.values_json).count))])]:"subgift"===r.event?[r.userName===o.userName?n("div",{domProps:{innerHTML:e._s(e.translate("managers.viewers.receivedSubscribeFrom").replace("$value",JSON.parse(r.values_json).fromId))}}):n("div",{domProps:{innerHTML:e._s(e.translate("managers.viewers.giftedSubscribeTo").replace("$value",r.userName))}})]:e._e()]}}],null,!0)})],1)],1)]}}],null,!0),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)}),[],!1,null,null,null);t.default=component.exports;I()(component,{VBtn:B.a,VCard:D.a,VCardActions:D.b,VCardText:D.d,VCardTitle:D.e,VChip:F.a,VCol:V.a,VContainer:V.b,VDataTable:$.a,VDialog:M.a,VDivider:P.a,VEditDialog:$.b,VIcon:N.a,VList:z.a,VListItem:z.c,VListItemTitle:z.j,VMenu:H.a,VProgressCircular:Y.a,VRow:V.d,VSheet:E.a,VSpacer:V.e,VTextField:R.a})},770:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonStates=void 0,t.ButtonStates={idle:0,progress:1,success:2,fail:3}},776:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(35);n(94),n(8),n(4),n(82),n(51),n(37),n(213),n(214),n(215),n(216),n(217),n(218),n(219),n(220),n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(39);function o(e,t,n){var o=null,l="select";return function(c){var d=void 0===e.value?e:e.value,v=d.findIndex((function(e){return e[t]===c[t]})),f=!1;if(window.event&&(f=!!window.event.shiftKey),f){var m=n.value.findIndex((function(e){return e[t]===o})),h=n.value.findIndex((function(e){return e[t]===c[t]}));if("select"===l)for(var i=Math.min(m,h);i<=Math.max(m,h);i++)d.push(n.value[i]);else d=d.filter((function(e){for(var t=!0,r=Math.min(m,h);r<=Math.max(m,h);r++)if(e===n.value[r]){t=!1;break}return t}))}else o=c[t],-1===v?(d.push(c),l="select"):(d.splice(v,1),l="unselect");d=Array.from(new Set(Object(r.a)(d))),console.log(d)}}}}]);