(window.webpackJsonp=window.webpackJsonp||[]).push([[150,110,112,139],{1152:function(e,t,n){"use strict";n.r(t);var r=n(1),o=(n(46),n(71),n(12),n(28),n(40),n(4),n(33),n(51),n(37),n(25),n(11),n(52),n(55),n(39),n(272)),l=n(21),c=n(49),m=n.n(c),d=n(779),f=n.n(d),v=n(804),y=n.n(v),h=n(141);function O(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){c=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var _=Object(r.h)({props:{value:Object,rules:Object,permissionItems:Array,groupItems:Array},setup:function(e,t){var menu=Object(r.J)(!1),n=Object(r.J)(y()(e.value)),c=Object(r.J)(!0),form=Object(r.J)(null),d=Object(r.J)(!1);var v=function t(){c.value=!0,form.value?(form.value.resetValidation(),n.value=y()(e.value),n.value.id&&setTimeout((function(){n.value.command=n.value.command+" ",Object(o.nextTick)((function(){n.value.command=n.value.command.trim()}))}),200)):setTimeout((function(){t()}),100)};Object(r.Y)(menu,(function(e){e&&v()}));return{menu:menu,item:n,save:function(){if(form.value.validate()){for(var r=0,o=Object.keys(e.rules);r<o.length;r++){var c,m=o[r],f=O(e.rules[m]);try{for(f.s();!(c=f.n()).done;){var v=(0,c.value)(n.value[m]);if(!0!==v)return void h.a.$emit("snack","red","[".concat(m,"] - ").concat(v))}}catch(e){f.e(e)}finally{f.f()}}var data=n.value;console.log("Updating",{data:data}),d.value=!0,Object(l.getSocket)("/core/general").emit("generic::setCoreCommand",n.value,(function(){h.a.$emit("snack","success","Data updated."),menu.value=!1,t.emit("save"),d.value=!1}))}},translate:m.a,capitalize:f.a,valid:c,saving:d,form:form}}}),w=n(45),x=n(44),S=n.n(x),k=n(48),C=n(43),V=n(379),A=n(377),I=n(30),J=n(266),$=n(27),P=n(140),component=Object(w.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-dialog",{attrs:{persistent:"","max-width":"800",scrollable:"",fullscreen:e.$vuetify.breakpoint.mobile},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,o=t.attrs;return[n("v-btn",e._g(e._b({staticClass:"primary-hover",attrs:{icon:""}},"v-btn",o,!1),r),[n("v-icon",[e._v("\n          mdi-pencil\n        ")])],1)]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[e._v(" "),n("v-card",{staticClass:"pt-3",attrs:{outlined:""}},[n("v-card-text",[n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{attrs:{label:e.translate("command"),rules:e.rules.command,"hide-details":"auto",required:""},scopedSlots:e._u([{key:"append",fn:function(){return[e.item.command!==e.item.defaultValue?n("v-btn",{attrs:{small:"",text:""},on:{click:function(t){e.item.command=e.item.defaultValue}}},[e._v("\n                set to default\n              ")]):e._e()]},proxy:!0}]),model:{value:e.item.command,callback:function(t){e.$set(e.item,"command",t)},expression:"item.command"}}),e._v(" "),n("v-select",{attrs:{label:e.translate("permissions"),clearable:"",items:e.permissionItems,"hide-details":"auto"},model:{value:e.item.permission,callback:function(t){e.$set(e.item,"permission",t)},expression:"item.permission"}})],1)],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{text:""},on:{click:function(t){e.menu=!1}}},[e._v("\n          Cancel\n        ")]),e._v(" "),n("v-btn",{attrs:{color:"primary",loading:e.saving,text:"",disabled:!e.valid},on:{click:function(t){return e.save()}}},[e._v("\n          Save & Close\n        ")])],1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;S()(component,{VBtn:k.a,VCard:C.a,VCardActions:C.b,VCardText:C.d,VDialog:V.a,VForm:A.a,VIcon:I.a,VSelect:J.a,VSpacer:$.e,VTextField:P.a})},1445:function(e,t,n){"use strict";n.r(t);var r,o=n(1),l=n(60),c=(n(40),n(51),n(37),n(25),n(11),n(52),n(55),n(39),n(12),n(14),n(15),n(35)),m=n(2),d=n(147),f=(n(8),n(4),n(34),n(47),n(33),n(13),n(73),n(31),n(28),n(771)),v=n(21),y=n(49),h=n.n(y),O=n(148),j=n(54),_=n(80),w=n(783),x=n(265);function S(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function k(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?S(Object(source),!0).forEach((function(t){Object(m.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):S(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}function C(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){c=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var A={setup:function(e,t){var n=Object(l.d)().$graphql,m=Object(o.J)(!0),y={command:[Object(x.j)(["!"]),x.h,Object(x.e)(2)]},S=Object(o.J)(""),V=Object(o.J)([]),A=Object(o.J)([]),I=Object(o.J)([]),J=Object(o.J)({loading:f.ButtonStates.progress}),$=Object(o.b)((function(){return""===S.value?V.value:V.value.filter((function(e){var t=e.command.toLowerCase().includes(S.value.toLowerCase()),n=e.defaultValue.toLowerCase().includes(S.value.toLowerCase()),r=e.name.toLowerCase().includes(S.value.toLowerCase());return n||t||r}))})),P=[{value:"command",text:h()("command")},{value:"type",text:Object(j.capitalize)(h()("type"))},{value:"name",text:Object(j.capitalize)(h()("name"))},{value:"permission",text:h()("permission")},{value:"actions",sortable:!1}],B=function(){n.default.request(Object(O.a)(r||(r=Object(d.a)(["\n      query {\n        permissions { id name }\n      }\n    "])))).then((function(data){A.value=data.permissions,m.value=!1})),Object(v.getSocket)("/core/general").emit("generic::getCoreCommands",(function(e,t){if(e)return Object(_.a)(e);console.debug({commands:t}),V.value.length=0;var n,r=C(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;V.value.push(k({},o))}}catch(e){r.e(e)}finally{r.f()}I.value.length>0&&I.value.forEach((function(e,t){e=V.value.find((function(t){return t.id===e.id}))||e,I.value[t]=e})),J.value.loading=f.ButtonStates.success}))};Object(o.A)((function(){B()}));var E=Object(o.b)((function(){return[].concat(Object(c.a)(A.value),[{name:"Disabled",id:null}]).map((function(e){return{text:e.name,value:e.id,disabled:!1}}))}));return{ButtonStates:f.ButtonStates,getPermissionName:w.a,loading:m,rules:y,search:S,items:V,permissions:A,selected:I,state:J,fItems:$,headers:P,refresh:B,permissionItems:E}}},I=A,J=n(45),$=n(44),P=n.n($),B=n(27),E=n(268),T=n(30),component=Object(J.a)(I,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{class:{"pa-4":!e.$vuetify.breakpoint.mobile},attrs:{fluid:""}},[n("v-data-table",{attrs:{loading:e.state.loading!==e.ButtonStates.success||e.loading,headers:e.headers,"items-per-page":-1,items:e.fItems,"sort-by":"name","group-by":"type"},scopedSlots:e._u([{key:"top",fn:function(){return[n("table-search-bar",{attrs:{search:e.search},on:{"update:search":function(t){e.search=t}}})]},proxy:!0},{key:"group.header",fn:function(t){var r=t.items,o=t.isOpen,l=t.toggle;return[n("th",{attrs:{colspan:"7"}},[n("v-icon",{on:{click:l}},[e._v("\n          "+e._s(o?"mdi-minus":"mdi-plus")+"\n        ")]),e._v("\n\n        "+e._s(r[0].type)+"\n      ")],1)]}},{key:"item.actions",fn:function(t){var r=t.item;return[n("v-row",{attrs:{dense:"",justify:"end",align:"center"}},[n("v-col",{attrs:{cols:"auto"}},[n("manage-botcommands-edit",{attrs:{rules:e.rules,value:r,"permission-items":e.permissionItems},on:{save:function(t){return e.refresh()}}})],1)],1)]}},{key:"item.command",fn:function(t){var r=t.item;return[n("span",{class:{"text-decoration-line-through":r.command!==r.defaultValue}},[e._v(e._s(r.defaultValue))]),e._v(" "),r.command!==r.defaultValue?n("span",[n("v-icon",{staticClass:"d-inline-block"},[e._v("mdi-arrow-right-bold")]),e._v(" "+e._s(r.command)+"\n      ")],1):e._e()]}},{key:"item.permission",fn:function(t){var r=t.item;return[n("span",{class:{"text--lighten-1":null===r.permission,"red--text":null===r.permission}},[e._v("\n        "+e._s(null===r.permission?"-- unset --":e.getPermissionName(r.permission,e.permissions))+"\n      ")])]}}],null,!0),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)}),[],!1,null,null,null);t.default=component.exports;P()(component,{TableSearchBar:n(785).default,ManageBotcommandsEdit:n(1152).default}),P()(component,{VCol:B.a,VContainer:B.b,VDataTable:E.a,VIcon:T.a,VRow:B.d})},771:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonStates=void 0,t.ButtonStates={idle:0,progress:1,success:2,fail:3}},783:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(73),n(4),n(71),n(33);var r=function(e,t){if(!t)throw new Error("Missing permissions list");if(!e)return"-- unset --";var n=t.find((function(t){return t.id===e}));return void 0!==n?""===n.name.trim()?n.id:n.name:null}},785:function(e,t,n){"use strict";n.r(t);n(25),n(229);var r=n(1),o=Object(r.h)({props:{search:String,label:String},setup:function(e,t){var n=Object(r.J)(e.search),o=e.label?e.label:"Search";return Object(r.Y)(n,(function(e){t.emit("update:search",e)})),{searchModel:n,searchLabel:o}}}),l=n(45),c=n(44),m=n.n(c),d=n(27),f=n(134),v=n(140),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-sheet",{staticClass:"my-2 pb-2 mt-0",attrs:{flat:"",color:"dark"}},[n("v-row",{staticClass:"px-2",attrs:{dense:""}},[n("v-col",{attrs:{"align-self":"center"}},[n("v-text-field",{staticClass:"pa-0 ma-2",attrs:{"append-icon":"mdi-magnify",label:e.searchLabel,"single-line":"","hide-details":""},model:{value:e.searchModel,callback:function(t){e.searchModel=t},expression:"searchModel"}})],1),e._v(" "),void 0!==e.$slots.default?n("v-col",{attrs:{cols:"auto","align-self":"center"}},[e._t("default")],2):e._e()],1)],1)}),[],!1,null,null,null);t.default=component.exports;m()(component,{VCol:d.a,VRow:d.d,VSheet:f.a,VTextField:v.a})}}]);