(window.webpackJsonp=window.webpackJsonp||[]).push([[228],{1001:function(e,t,n){"use strict";var r=n(807),o=n(1003),l=n(1007),c=n(1008)||0;function d(){return o(c)}e.exports=d,e.exports.generate=d,e.exports.seed=function(t){return r.seed(t),e.exports},e.exports.worker=function(t){return c=t,e.exports},e.exports.characters=function(e){return void 0!==e&&r.characters(e),r.shuffled()},e.exports.isValid=l},1002:function(e,t,n){"use strict";var r=1;e.exports={nextValue:function(){return(r=(9301*r+49297)%233280)/233280},seed:function(e){r=e}}},1003:function(e,t,n){"use strict";var r,o,l=n(1004);n(807);e.exports=function(e){var t="",n=Math.floor(.001*(Date.now()-1567752802062));return n===o?r++:(r=0,o=n),t+=l(7),t+=l(e),r>0&&(t+=l(r)),t+=l(n)}},1004:function(e,t,n){"use strict";var r=n(807),o=n(1005),l=n(1006);e.exports=function(e){for(var t,n=0,c="";!t;)c+=l(o,r.get(),1),t=e<Math.pow(16,n+1),n++;return c}},1005:function(e,t,n){"use strict";var r,o="object"==typeof window&&(window.crypto||window.msCrypto);r=o&&o.getRandomValues?function(e){return o.getRandomValues(new Uint8Array(e))}:function(e){for(var t=[],i=0;i<e;i++)t.push(Math.floor(256*Math.random()));return t},e.exports=r},1006:function(e,t){e.exports=function(e,t,n){for(var mask=(2<<31-Math.clz32(t.length-1|1))-1,r=Math.ceil(1.6*mask*n/t.length),o="";;)for(var l=e(r),i=r;i--;)if((o+=t[l[i]&mask]||"").length===+n)return o}},1007:function(e,t,n){"use strict";var r=n(807);e.exports=function(e){return!(!e||"string"!=typeof e||e.length<6)&&!new RegExp("[^"+r.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(e)}},1008:function(e,t,n){"use strict";e.exports=0},1517:function(e,t,n){"use strict";n.r(t);var r,o,l=n(1),c=n(60),d=(n(40),n(33),n(51),n(11),n(52),n(55),n(110)),f=n(35),v=n(147),m=n(26),h=(n(81),n(24),n(25),n(62),n(4),n(37),n(39),n(31),n(73),n(8),n(13),n(386)),w=n(49),y=n.n(w),x=n(148),O=n(54),_=n(988),j=n.n(_),V=n(173),C=n(80),P=n(141),S=["id"];function $(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){c=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var E=[],I=0,k=null;function R(e){var element;P.a.$emit("carousel::dragstart");var t,n=$(e.path);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("A"===r.tagName){var o,l=$((element=r).children);try{for(l.s();!(o=l.n()).done;){var c=o.value;E.push("".concat(parseInt(window.getComputedStyle(c).width),"px"))}}catch(e){l.e(e)}finally{l.f()}I=Number(window.getComputedStyle(element).height.replace("px",""))+10,k=element.nextElementSibling,document.onmouseup=d;break}}}catch(e){n.e(e)}finally{n.f()}function d(e){var t,n,r=null,o=document.elementFromPoint(e.clientX,e.clientY);if(o)if("A"!==o.tagName)for(;!r;){var l,c=null===(l=o)||void 0===l?void 0:l.parentElement;if(!c)break;"A"===c.tagName?r=c:o=c}else r=o;if(r&&r.id!==h.defaultPermissions.CASTERS)try{var d;null===(d=r.parentNode)||void 0===d||d.insertBefore(element,r),P.a.$emit("permissions::dragdrop")}catch(e){Object(C.a)(e)}else null===(t=k)||void 0===t||null===(n=t.parentNode)||void 0===n||n.insertBefore(element,k);element.style.position="inherit",element.style.opacity="1",element.style.top="inherit",element.style.left="inherit",document.onmousemove=null,document.onmouseup=null,P.a.$emit("permissions::dragstop")}document.onmousemove=function(e){for(var t,i=0;i<element.children.length;i++)element.children[i].style.maxWidth=E[i],element.children[i].style.minWidth=E[i],element.children[i].style.overflow="hidden";null===(t=document.getElementById("app"))||void 0===t||t.appendChild(element),element.style.opacity="0.8",element.style.zIndex=String(9999),element.style.top=e.clientY+I-70+"px",element.style.left=e.clientX+5+"px",element.style.position="fixed",E.length=0}}var T=Object(l.h)({setup:function(){var e=Object(l.J)(!0),t=Object(c.d)().$graphql,n=Object(l.J)([]),w=function(){var o=Object(m.a)(regeneratorRuntime.mark((function o(){var l;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,t.default.request(Object(x.a)(r||(r=Object(v.a)(["\n      query getPermissions {\n        permissions {\n          id name order isCorePermission isWaterfallAllowed automation userIds excludeUserIds\n          filters {\n            id\n            comparator\n            type\n            value\n          }\n        }\n      }\n    "]))));case 2:l=o.sent,n.value=Object(O.cloneDeep)(l.permissions),_.params.id||C.replace("/settings/permissions/"+n.value[0].id),e.value=!1;case 6:case"end":return o.stop()}}),o)})));return function(){return o.apply(this,arguments)}}(),_=Object(c.e)(),C=Object(c.f)(),$=Object(l.J)(0),A=Object(l.J)(null),E=Object(l.J)({dragging:!1,saving:!1});Object(l.Y)((function(){return _.params.id}),(function(t){t||e.value||_.params.id||C.replace("/settings/permissions/"+n.value[0].id)})),Object(l.A)((function(){w(),P.a.$off("settings::permissions::refresh").$on("settings::permissions::refresh",w),P.a.$off("permissions::dragdrop").$off("permissions::dragstart"),P.a.$on("permissions::dragstart",(function(){E.value.dragging=!0})),P.a.$on("permissions::dragstop",(function(){E.value.dragging=!1})),P.a.$on("permissions::dragdrop",Object(m.a)(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=A.value.$el.children[0].children[1].children[0].children,i=0,e.next=4,Promise.all(Object(f.a)(t).map((function(e){return new Promise((function(t){if("A"===e.tagName){var r=n.value.find((function(t){return t.id===e.id}));r&&(r.order=i++)}t(!0)}))})));case 4:I();case 5:case"end":return e.stop()}}),e)}))))}));var I=function(){var e=Object(O.cloneDeep)(n.value.find((function(e){return e.id===h.defaultPermissions.VIEWERS})));n.value=Object(O.sortBy)(n.value.filter((function(e){return e.id!==h.defaultPermissions.VIEWERS})),"order","asc"),e&&(e.order=n.value.length,n.value.push(e)),n.value.forEach((function(e){var n=e.id,data=Object(d.a)(e,S);t.default.request(Object(x.a)(o||(o=Object(v.a)(["\n          mutation permissionUpdate($id: String!, $data: PermissionInput!) {\n            permissionUpdate(id: $id, data: $data) {\n              id\n            }\n          }"]))),{id:n,data:data})}))};return{loading:e,permissions:n,tab:$,state:E,tabsRef:A,addNewPermissionGroup:function(){var data={id:Object(V.a)(),name:j.a.generate(),isCorePermission:!1,isWaterfallAllowed:!0,automation:"none",order:n.value.length-1,userIds:[],excludeUserIds:[],filters:[]};n.value.push(data),I()},handleDragStart:R,swapOrder:function(e,t){var r=n.value.find((function(t){return t.order===e})),o=n.value.find((function(e){return e.order===t}));r&&o&&(r.order=t,o.order=e),I()},translate:y.a,defaultPermissions:h.defaultPermissions}}}),N=T,M=n(45),W=n(44),J=n.n(W),D=n(380),U=n(48),B=n(43),G=n(27),Y=n(30),z=n(142),X=n(143),F=n(50),H=n(120),component=Object(M.a)(N,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loading?n("v-overlay",{attrs:{absolute:""}},[n("v-row",[n("v-col",{staticClass:"text-center"},[n("v-progress-circular",{attrs:{indeterminate:"",size:"48"}})],1)],1)],1):n("v-container",{attrs:{fluid:""}},[n("v-row",{staticClass:"pt-2",attrs:{dense:""}},[n("v-col",{attrs:{cols:"auto"}},[n("v-card",[n("v-toolbar",{attrs:{dense:"",color:"blue-grey darken-4"}},[n("v-toolbar-title",{staticClass:"text-button"},[e._v("\n            "+e._s(e.translate("core.permissions.permissionsGroups"))+"\n          ")]),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{attrs:{icon:"",loading:e.state.saving},on:{click:e.addNewPermissionGroup}},[n("v-icon",[e._v("mdi-plus")])],1)],1),e._v(" "),n("v-card-text",{staticClass:"pa-0"},[n("v-tabs",{ref:"tabsRef",attrs:{vertical:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.permissions,(function(t){return n("v-tab",{key:t.id,staticStyle:{"text-align":"left","justify-content":"normal","max-width":"none"},attrs:{id:t.id,disabled:e.state.saving,nuxt:"",to:"/settings/permissions/"+t.id}},[t.id!==e.defaultPermissions.VIEWERS&&t.id!==e.defaultPermissions.CASTERS?[e.$vuetify.breakpoint.mobile?[t.order>1?n("v-icon",{on:{click:function(n){return n.stopPropagation(),e.swapOrder(t.order,t.order-1)}}},[e._v("\n                    mdi-chevron-up\n                  ")]):e._e(),e._v(" "),t.order!==e.permissions.length-2?n("v-icon",{on:{click:function(n){return n.stopPropagation(),e.swapOrder(t.order,t.order+1)}}},[e._v("\n                    mdi-chevron-down\n                  ")]):e._e()]:n("v-icon",{attrs:{disabled:e.state.dragging||e.state.saving},on:{mousedown:function(n){return n.preventDefault(),e.handleDragStart(n,t.id)}}},[e._v("\n                  mdi-drag\n                ")])]:e._e(),e._v(" "),n("v-icon",{attrs:{left:"",small:""}},[e._v("\n                "+e._s(t.isWaterfallAllowed?e.mdiGreaterThanOrEqual:e.mdiEqual)+"\n              ")]),e._v(" "),n("span",{class:{"white--text":t.isCorePermission}},[e._v(e._s(t.name))]),e._v(" "),t.automation?[n("v-spacer"),e._v(" "),n("v-icon",{attrs:{left:"",small:""}},[e._v("\n                  mdi-cog\n                ")]),e._v(" "),n("small",{staticClass:"text-caption"},[e._v(e._s(e.translate("core.permissions."+t.automation)))])]:e._e()],2)})),1)],1)],1),e._v(" "),n("v-alert",{attrs:{color:"error",text:""}},[e._v("\n        "+e._s(e.translate("core.permissions.higherPermissionHaveAccessToLowerPermissions"))+"\n      ")])],1),e._v(" "),n("v-col",[n("NuxtChild")],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;J()(component,{VAlert:D.a,VBtn:U.a,VCard:B.a,VCardText:B.d,VCol:G.a,VContainer:G.b,VIcon:Y.a,VOverlay:z.a,VProgressCircular:X.a,VRow:G.d,VSpacer:G.e,VTab:F.a,VTabs:F.c,VToolbar:H.a,VToolbarTitle:H.b})},807:function(e,t,n){"use strict";var r,o,l,c=n(1002),d="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function f(){l=!1}function v(e){if(e){if(e!==r){if(e.length!==d.length)throw new Error("Custom alphabet for shortid must be "+d.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter((function(e,t,n){return t!==n.lastIndexOf(e)}));if(t.length)throw new Error("Custom alphabet for shortid must be "+d.length+" unique characters. These characters were not unique: "+t.join(", "));r=e,f()}}else r!==d&&(r=d,f())}function m(){return l||(l=function(){r||v(d);for(var e,t=r.split(""),n=[],o=c.nextValue();t.length>0;)o=c.nextValue(),e=Math.floor(o*t.length),n.push(t.splice(e,1)[0]);return n.join("")}())}e.exports={get:function(){return r||d},characters:function(e){return v(e),r},seed:function(e){c.seed(e),o!==e&&(f(),o=e)},lookup:function(e){return m()[e]},shuffled:m}},988:function(e,t,n){"use strict";e.exports=n(1001)}}]);