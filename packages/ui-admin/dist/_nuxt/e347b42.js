(window.webpackJsonp=window.webpackJsonp||[]).push([[229,134,135,136],{1050:function(e,t,r){r(1051)},1051:function(e,t,r){"use strict";var n=r(9),o=r(42),l=r(58),c=r(232),m=r(324),d=r(53);n({target:"Promise",stat:!0},{allSettled:function(e){var t=this,r=c.f(t),n=r.resolve,v=r.reject,f=m((function(){var r=l(t.resolve),c=[],m=0,v=1;d(e,(function(e){var l=m++,d=!1;v++,o(r,t,e).then((function(e){d||(d=!0,c[l]={status:"fulfilled",value:e},--v||n(c))}),(function(e){d||(d=!0,c[l]={status:"rejected",reason:e},--v||n(c))}))})),--v||n(c)}));return f.error&&v(f.value),r.promise}})},1157:function(e,t,r){"use strict";r.r(t);r(4),r(1050),r(37),r(39),r(31),r(71);var n=r(5),o=r(21),l=r(49),c=r.n(l),m=r(173),d=Object(n.c)({props:{value:Array,label:String},setup:function(e,t){var r=Object(n.i)(e.value),l=Object(n.i)(""),d=Object(n.i)([]),v=Object(n.i)(!1);return Object(n.f)((function(){v.value=!1,Promise.allSettled(r.value.map((function(e){return new Promise((function(t){Object(o.getSocket)("/core/users").emit("getNameById",e,(function(r,n){if(r)return console.error(r);n&&d.value.push({userId:e,userName:n}),t(!0)}))}))}))).then((function(){return v.value=!1}))})),Object(n.p)(r,(function(e){t.emit("input",e)})),Object(n.p)(l,(function(e){v.value=!0;var t=Object(m.a)();e&&0!==e.trim().length?Object(o.getSocket)("/core/users").emit("find.viewers",{search:e,state:t,exactUsernameFromTwitch:!0},(function(e,r,n,o){if(e)return console.error(e);t===o&&(d.value=r,v.value=!1)})):v.value=!1})),{model:r,search:l,isLoading:v,searchItems:d,translate:c.a}}}),v=r(45),f=r(44),h=r.n(f),_=r(380),component=Object(v.a)(d,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("v-autocomplete",{attrs:{label:e.label,"search-input":e.search,items:e.searchItems,"hide-no-data":"",placeholder:"Start typing to Search",multiple:"","item-text":"userName","item-value":"userId",loading:e.isLoading,chips:"","small-chips":"","cache-items":"","deletable-chips":""},on:{"update:searchInput":function(t){e.search=t},"update:search-input":function(t){e.search=t}},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})}),[],!1,null,null,null);t.default=component.exports;h()(component,{VAutocomplete:_.a})},1158:function(e,t,r){"use strict";r.r(t);r(31),r(34),r(47),r(82);var n=r(5),o=r(49),l=r.n(o),c=Object(n.c)({props:{value:Array},setup:function(e,t){var r=Object(n.i)(e.value),o=Object(n.i)(["level","ranks","points","watched","tips","bits","messages","subtier","subcumulativemonths","substreakmonths","followtime"].map((function(e){return{value:e,text:l()("core.permissions."+e)}})));Object(n.p)(r,(function(e){t.emit("input",e)}));var c=function(e){return!e.includes("ranks")};return{model:r,typeItems:o,comparatorItems:function(filter){var e=[];return c(filter.type)&&(e.push({value:"<",text:l()("core.permissions.isLowerThan")}),e.push({value:"<=",text:l()("core.permissions.isLowerThanOrEquals")})),e.push({value:"==",text:l()("core.permissions.equals")}),c(filter.type)&&(e.push({value:">",text:l()("core.permissions.isHigherThan")}),e.push({value:">=",text:l()("core.permissions.isHigherThanOrEquals")})),e},setComparator:function(filter){c(filter.type)&&(filter.comparator="==")},isNumber:c,remove:function(e){r.value.splice(e,1)},add:function(){r.value.push({comparator:">=",type:"watched",value:"0"})},translate:l.a}}}),m=r(45),d=r(44),v=r.n(d),f=r(48),h=r(27),_=r(30),x=r(267),O=r(140),component=Object(m.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("label",{staticClass:"v-label theme--dark"},[e._v("\n    "+e._s(e.translate("core.permissions.filters"))+"\n  ")]),e._v(" "),e._l(e.model,(function(filter,t){return r("v-row",{key:filter.id},[r("v-col",{attrs:{"align-self":"end"}},[r("v-select",{attrs:{items:e.typeItems,label:e.translate("core.permissions.type"),"hide-details":""},on:{"&input":function(t){return e.setComparator(filter)}},model:{value:filter.type,callback:function(t){e.$set(filter,"type",t)},expression:"filter.type"}})],1),e._v(" "),r("v-col",{attrs:{"align-self":"end"}},[r("v-select",{attrs:{items:e.comparatorItems(filter),"hide-details":""},model:{value:filter.comparator,callback:function(t){e.$set(filter,"comparator",t)},expression:"filter.comparator"}})],1),e._v(" "),r("v-col",{attrs:{"align-self":"end"}},[e.isNumber(filter.value)?r("v-text-field",{attrs:{"hide-details":"",label:e.translate("core.permissions.value")},model:{value:filter.value,callback:function(t){e.$set(filter,"value",e._n(t))},expression:"filter.value"}}):r("v-text-field",{attrs:{"hide-details":"",label:e.translate("core.permissions.value")},model:{value:filter.value,callback:function(t){e.$set(filter,"value",t)},expression:"filter.value"}})],1),e._v(" "),r("v-col",{attrs:{"align-self":"end",cols:"auto"}},[r("v-btn",{attrs:{icon:"",color:"red"},on:{click:function(r){return e.remove(t)}}},[r("v-icon",[e._v("mdi-delete-forever")])],1)],1)],1)})),e._v(" "),r("v-row",[r("v-col",[r("v-btn",{on:{click:e.add}},[e._v("\n        "+e._s(e.translate("core.permissions.addFilter"))+"\n      ")])],1)],1)],2)}),[],!1,null,null,null);t.default=component.exports;v()(component,{VBtn:f.a,VCol:h.a,VIcon:_.a,VRow:h.d,VSelect:x.a,VTextField:O.a})},1159:function(e,t,r){"use strict";r.r(t);r(71),r(24);var n=r(5),o=r(21),l=r(49),c=r.n(l),m=r(173),d=Object(n.c)({props:{permission:String},setup:function(e){var t=Object(n.i)(!1),r=Object(n.i)({}),l=Object(n.i)({}),d=Object(n.i)(""),v=Object(n.i)("");return{isTesting:t,status:r,partialStatus:l,testUsername:d,testUser:function(){t.value=!0;var n=Object(m.a)();r.value={},l.value={},0===d.value.trim().length?t.value=!1:Object(o.getSocket)("/core/permissions").emit("test.user",{pid:e.permission,value:d.value,state:n},(function(e,o){if(e)return v.value=e,t.value=!1,console.error(c()("core.permissions."+e));v.value="",o&&o.state===n&&(r.value=o.status,l.value=o.partial,t.value=!1)}))},translate:c.a,error:v,color:function(){return 0===Number(r.value.access)&&0===Number(l.value.access)?"error":1===Number(r.value.access)||1===Number(l.value.access)?"success":"orange lighten-2"},empty:function(){r.value={},l.value={}}}}}),v=r(45),f=r(44),h=r.n(f),_=r(379),x=r(140),component=Object(v.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-text-field",{attrs:{loading:e.isTesting,label:e.translate("core.permissions.testUser"),hint:"Press enter to check user"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.testUser.apply(null,arguments)},input:e.empty},model:{value:e.testUsername,callback:function(t){e.testUsername=t},expression:"testUsername"}}),e._v(" "),e.error.length>0?r("v-alert",{attrs:{text:"",color:"error",border:"left"}},[e._v("\n    "+e._s(e.translate("core.permissions."+e.error))+"\n  ")]):e._e(),e._v(" "),void 0===e.status.access||void 0===e.partialStatus.access||e.isTesting?e._e():r("v-alert",{attrs:{text:"",color:e.color(),border:"left"}},[0===Number(e.status.access)&&0===Number(e.partialStatus.access)?r("span",{domProps:{innerHTML:e._s(e.translate("core.permissions.userHaveNoAccessToThisPermissionGroup").replace("$username",e.testUsername))}}):1===Number(e.status.access)||1===Number(e.partialStatus.access)?r("span",[r("span",{domProps:{innerHTML:e._s(e.translate("core.permissions.userHaveAccessToThisPermissionGroup").replace("$username",e.testUsername))}}),e._v(" "),r("ul",{staticClass:"mb-0"},[1===Number(e.partialStatus.access)?r("li",[r("span",{domProps:{innerHTML:e._s(e.translate("core.permissions.accessDirectlyThrough"))}}),e._v(" "),r("nuxt-link",{attrs:{to:"/settings/permissions/"+e.partialStatus.permission.id}},[e._v(e._s(e.partialStatus.permission.name)+" "),r("small",[e._v(e._s(e.partialStatus.permission.id))])]),e._v(".\n        ")],1):e._e(),e._v(" "),1===Number(e.status.access)&&e.status.permission.id!==e.partialStatus.permission.id?r("li",[r("span",{domProps:{innerHTML:e._s(e.translate("core.permissions.accessThroughHigherPermission"))}}),e._v(" "),r("nuxt-link",{attrs:{to:"/settings/permissions/"+e.status.permission.id}},[e._v(e._s(e.status.permission.name)+" "),r("small",[e._v(e._s(e.status.permission.id))])]),e._v(".\n        ")],1):e._e()])]):r("span",{domProps:{innerHTML:e._s(e.translate("core.permissions.somethingWentWrongUserWasNotFoundInBotDatabase").replace("$username",e.testUsername))}})])],1)}),[],!1,null,null,null);t.default=component.exports;h()(component,{VAlert:_.a,VTextField:x.a})},1517:function(e,t,r){"use strict";r.r(t);var n,o,l,c=r(60),m=r(1),d=r(110),v=r(147),f=r(26),h=(r(31),r(81),r(49)),_=r.n(h),x=r(148),O=r(141),j=r(266),k=["__typename"],y=["id"],w={setup:function(e,t){var r=Object(c.d)().$graphql,h=Object(c.f)(),w=Object(c.e)(),$=Object(m.J)(!0),S=Object(m.J)(!1),T=Object(m.J)(!1),P=function(){var e=Object(f.a)(regeneratorRuntime.mark((function e(){var t,o,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.default.request(Object(x.a)(n||(n=Object(v.a)(["\n      query getPermissions($id: String) {\n        permissions(id: $id) {\n          id name order isCorePermission isWaterfallAllowed automation userIds excludeUserIds\n          filters {\n            id\n            comparator\n            type\n            value\n          }\n        }\n      }\n    "]))),{id:w.params.id});case 2:(t=e.sent)&&t.permissions&&t.permissions[0]&&(o=t.permissions[0],o.__typename,data=Object(d.a)(o,k),V.value=data),$.value=!1;case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(m.A)((function(){P()})),Object(m.Y)((function(){return w.params.id}),(function(){P()}));var V=Object(m.J)(null),C=Object(m.J)(!0),I=["none","casters","moderators","subscribers","vip","viewers","followers"].map((function(e){return{value:e,text:_()("core.permissions."+e)}})),U=function(){var e=Object(f.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T.value=!0,e.next=3,r.default.request(Object(x.a)(o||(o=Object(v.a)(["\n      mutation permissionDelete($id: String!) {\n        permissionDelete(id: $id)\n      }"]))),{id:t});case 3:h.push("/settings/permissions"),T.value=!1;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(f.a)(regeneratorRuntime.mark((function e(){var t,n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(V.value&&V.value.id&&C)){e.next=8;break}return S.value=!0,t=V.value,n=t.id,data=Object(d.a)(t,y),e.next=5,r.default.request(Object(x.a)(l||(l=Object(v.a)(["\n    mutation permissionUpdate($id: String!, $data: PermissionInput!) {\n        permissionUpdate(id: $id, data: $data) {\n          id\n        }\n      }"]))),{id:n,data:data});case 5:O.a.$emit("settings::permissions::refresh"),O.a.$emit("snack","success","Data updated."),S.value=!1;case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{translate:_.a,required:j.h,saving:S,removing:T,model:V,valid:C,automationItems:I,remove:U,save:N}}},$=w,S=r(45),T=r(44),P=r.n(T),V=r(48),C=r(43),I=r(268),U=r(27),N=r(376),A=r(30),H=r(142),L=r(143),E=r(267),F=r(140),R=r(120),component=Object(S.a)($,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-toolbar",{attrs:{dense:"",color:"blue-grey darken-4"}},[r("v-toolbar-title",{staticClass:"text-button"},[e._v("\n      "+e._s(e.translate("core.permissions.settings"))+"\n    ")])],1),e._v(" "),r("v-card-text",[e.model?[r("v-form",{attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-text-field",{attrs:{label:e.translate("core.permissions.name"),rules:[e.required]},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}}),e._v(" "),e.model.isCorePermission?e._e():r("v-select",{attrs:{label:e.translate("core.permissions.baseUsersSet"),items:e.automationItems},model:{value:e.model.automation,callback:function(t){e.$set(e.model,"automation",t)},expression:"model.automation"}}),e._v(" "),e.model.isCorePermission?e._e():r("v-checkbox",{attrs:{label:e.translate("core.permissions.allowHigherPermissions")},model:{value:e.model.isWaterfallAllowed,callback:function(t){e.$set(e.model,"isWaterfallAllowed",t)},expression:"model.isWaterfallAllowed"}}),e._v(" "),e.model.isCorePermission?e._e():r("settings-permissions-userslist",{attrs:{label:e.translate("core.permissions.manuallyAddedUsers")},model:{value:e.model.userIds,callback:function(t){e.$set(e.model,"userIds",t)},expression:"model.userIds"}}),e._v(" "),e.model.isCorePermission?e._e():r("settings-permissions-userslist",{attrs:{label:e.translate("core.permissions.manuallyExcludedUsers")},model:{value:e.model.excludeUserIds,callback:function(t){e.$set(e.model,"excludeUserIds",t)},expression:"model.excludeUserIds"}}),e._v(" "),e.model.isCorePermission?e._e():r("settings-permissions-filters",{model:{value:e.model.filters,callback:function(t){e.$set(e.model,"filters",t)},expression:"model.filters"}}),e._v(" "),r("settings-permissions-test",{attrs:{permission:e.model.id}})],1)]:r("v-overlay",{attrs:{absolute:""}},[r("v-row",[r("v-col",{staticClass:"text-center"},[r("v-progress-circular",{attrs:{indeterminate:"",size:"48"}})],1)],1)],1)],2),e._v(" "),e.model&&!e.model.isCorePermission?r("v-card-actions",[r("v-btn",{attrs:{color:"error",loading:e.removing},on:{click:function(t){return e.remove(e.model.id)}}},[e._v("\n      "+e._s(e.translate("delete"))+"\n    ")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{text:!e.$vuetify.breakpoint.xs,icon:e.$vuetify.breakpoint.xs,loading:e.saving,disabled:!e.valid},on:{click:e.save}},[r("v-icon",{staticClass:"d-flex d-sm-none"},[e._v("\n        mdi-floppy\n      ")]),e._v(" "),r("span",{staticClass:"d-none d-sm-flex"},[e._v(e._s(e.translate("dialog.buttons.saveChanges.idle")))])],1)],1):e._e()],1)}),[],!1,null,null,null);t.default=component.exports;P()(component,{SettingsPermissionsUserslist:r(1157).default,SettingsPermissionsFilters:r(1158).default,SettingsPermissionsTest:r(1159).default}),P()(component,{VBtn:V.a,VCard:C.a,VCardActions:C.b,VCardText:C.d,VCheckbox:I.a,VCol:U.a,VForm:N.a,VIcon:A.a,VOverlay:H.a,VProgressCircular:L.a,VRow:U.d,VSelect:E.a,VSpacer:U.e,VTextField:F.a,VToolbar:R.a,VToolbarTitle:R.b})}}]);