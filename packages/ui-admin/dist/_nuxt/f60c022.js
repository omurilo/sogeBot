(window.webpackJsonp=window.webpackJsonp||[]).push([[144],{1581:function(e,t,n){"use strict";n.r(t);var o=n(60),l=n(1),c=(n(146),n(63),n(4),n(318),n(319),n(39),n(787),n(62),n(11),n(52),n(40),n(10)),r=n(95),d=n(383),v=n(35),f=n(26),m=(n(81),n(28),n(25),n(12),n(24),n(46),n(51),n(37),n(34),n(47),n(111)),y=n(21),h=n(822),O=n.n(h);function x(){x=function(e,t){return new n(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function n(e,o,l){var c=new RegExp(e,o);return t.set(c,l||t.get(e)),Object(d.a)(c,n.prototype)}function o(e,n){var g=t.get(n);return Object.keys(g).reduce((function(t,n){return t[n]=e[g[n]],t}),Object.create(null))}return Object(r.a)(n,RegExp),n.prototype.exec=function(t){var n=e.exec.call(this,t);return n&&(n.groups=o(n,this)),n},n.prototype[Symbol.replace]=function(n,l){if("string"==typeof l){var r=t.get(this);return e[Symbol.replace].call(this,n,l.replace(/\$<([^>]+)>/g,(function(e,t){return"$"+r[t]})))}if("function"==typeof l){var d=this;return e[Symbol.replace].call(this,n,(function(){var e=arguments;return"object"!=Object(c.a)(e[e.length-1])&&(e=[].slice.call(e)).push(o(e,d)),l.apply(this,e)}))}return e[Symbol.replace].call(this,n,l)},x.apply(this,arguments)}var w={};w.props={item:{key:"item",required:!0,type:Object},dialog:{key:"dialog",required:!0,type:Boolean},color:{key:"color",required:!0,type:String},editing:{key:"editing",required:!0,type:Boolean}},w.setup=function(e,t){var n=Object(o.d)().$graphql,c=e,r=Object(l.J)(c.item.selected),d=t.emit;Object(l.Y)(r,(function(e){d(e?"select":"unselect")}));var h=Object(l.J)(0),w=Object(l.J)(null),k=Object(l.J)(!1),time=Object(l.b)((function(){if(null===h.value||!S.value)return"--:--:--";var e=Math.floor(h.value/m.DAY),t=Math.floor((h.value-e*m.DAY)/m.HOUR),n=Math.floor((h.value-e*m.DAY-t*m.HOUR)/m.MINUTE),o=Math.floor((h.value-e*m.DAY-t*m.HOUR-n*m.MINUTE)/m.SECOND),l=Math.floor((h.value-e*m.DAY-t*m.HOUR-n*m.MINUTE-o*m.SECOND)/10);l<10&&(l="0".concat(l));var output="";return e>0&&(output+="".concat(e,"d")),output+="".concat(t<10?"0":"").concat(t,":").concat(n<10?"0":"").concat(n,":").concat(o<10?"0":"").concat(o),("string"==typeof S.value.opts?JSON.parse(S.value.opts):S.value.opts)&&(output+="<small>.".concat(l,"</small>")),output})),j=Object(l.J)([]),S=Object(l.J)(null);Object(l.A)(Object(f.a)(regeneratorRuntime.mark((function e(){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.default.request(O.a,{id:c.item.options.countdownId});case 2:data=e.sent.overlays.countdown,j.value=Object(v.a)(data);case 4:case"end":return e.stop()}}),e)})))),Object(l.Y)(j,(function(e){e.length>0&&(S.value=e[0])}),{immediate:!0,deep:!0});var E=Object(l.b)({get:function(){var e=Math.floor(h.value/m.DAY),t=Math.floor((h.value-e*m.DAY)/m.HOUR),n=Math.floor((h.value-e*m.DAY-t*m.HOUR)/m.MINUTE),o=Math.floor((h.value-e*m.DAY-t*m.HOUR-n*m.MINUTE)/m.SECOND);return"".concat(e,"d ").concat(t,"h ").concat(n,"m ").concat(o,"s")},set:function(e){var t=x(/((\d+)d)? ?((\d+)h)? ?((\d+)m)? ?((\d+)s)?/g,{days:2,hours:4,minutes:6,seconds:8}).exec(e);if(null!=t&&t.groups){for(var n=0,o=0,l=Object.keys(t.groups);o<l.length;o++){var c,r=l[o];if("days"===r)n+=Number(null!==(c=t.groups[r])&&void 0!==c?c:0)*m.DAY;else if("hours"===r){var d;n+=Number(null!==(d=t.groups[r])&&void 0!==d?d:0)*m.HOUR}else if("minutes"===r){var v;n+=Number(null!==(v=t.groups[r])&&void 0!==v?v:0)*m.MINUTE}else if("seconds"===r){var f;n+=Number(null!==(f=t.groups[r])&&void 0!==f?f:0)*m.SECOND}}h.value=n}}});Object(l.A)((function(){refetch(),setInterval((function(){S.value&&!k.value&&Object(y.getSocket)("/overlays/countdown").emit("countdown::check",S.value.id,(function(e,data){data&&S.value&&(w.value=data.isEnabled,h.value=data.time)}))}),1e3)}));return{selected:r,isStarted:w,showMenu:k,showDialog:function(){d("update:dialog",!0)},time:time,countdown:S,timeInput:E,updateTime:function(){S.value&&Object(y.getSocket)("/overlays/countdown").emit("countdown::update::set",{isEnabled:null,time:h.value,id:S.value.id}),k.value=!1},trigger:function(e){if(S.value){var t,n,o,l,r=document.getElementById("quickaction-".concat(c.item.id)),text=document.getElementsByClassName("text")[0],d=e.offsetX,v="SPAN"===(t=e.target).tagName||"I"===t.tagName?Array.from(null!==(n=t.classList)&&void 0!==n?n:[]):Array.from(null!==(o=null===(l=t.parentElement)||void 0===l?void 0:l.classList)&&void 0!==o?o:[]),f=v.includes("text");!v.includes("plus")&&(v.includes("minus")||d<(f?text.clientWidth:r.clientWidth)/2)?(w.value=!w.value,Object(y.getSocket)("/overlays/countdown").emit("countdown::update::set",{isEnabled:w.value,time:null,id:S.value.id})):k.value=!k.value}},keydownHandler:function(e){var t=e.key,n=e.shiftKey,o=e.ctrlKey,l=m.SECOND;n&&o?l=m.HOUR:n?l=m.MINUTE:o&&(l=15*m.SECOND),"ArrowUp"===t?h.value+=l:"ArrowDown"===t&&(h.value-=l)}}};var k=w,j=n(45),S=n(44),E=n.n(S),N=n(48),M=n(43),D=n(27),C=n(68),_=n(30),A=n(267),R=n(140),U=n(805),I=n.n(U),T=n(86),component=Object(j.a)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-card-text",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"text-button pa-1 mb-1 text-center",staticStyle:{"font-size":"12px !important",display:"block"},style:{color:e.color},on:{click:function(t){e.editing?e.showDialog():e.trigger(t)}}},[e.countdown?n("v-row",{attrs:{"no-gutters":"",ripple:""}},[e.editing?e._e():n("v-col",{staticClass:"d-flex",attrs:{cols:"auto"}},[n("v-icon",{staticClass:"minus",attrs:{color:e.color}},[null===e.isStarted?[e._v("\n            mdi-help\n          ")]:[e._v("\n            "+e._s(e.isStarted?"mdi-pause":"mdi-play")+"\n          ")]],2)],1),e._v(" "),n("v-col",{staticClass:"text",staticStyle:{"align-self":"center"}},[n("div",{staticStyle:{"font-size":"0.8rem"},domProps:{innerHTML:e._s(e.time)}})]),e._v(" "),e.editing?e._e():n("v-col",{staticClass:"d-flex",attrs:{cols:"auto"}},[n("v-icon",{staticClass:"plus",attrs:{color:e.color}},[e._v("\n          mdi-alarm-plus\n        ")])],1),e._v(" "),n("v-slide-x-reverse-transition",[e.editing?n("v-col",{staticClass:"d-flex",attrs:{cols:"auto"}},["white"!==e.color?n("v-simple-checkbox",{attrs:{light:""},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}):n("v-simple-checkbox",{attrs:{dark:""},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1):e._e()],1)],1):e._e()],1),e._v(" "),n("v-expand-transition",[e.showMenu&&e.countdown?n("div",[n("v-text-field",{attrs:{label:"Countdown","hide-details":"auto",solo:"",dense:""},on:{keydown:e.keydownHandler},scopedSlots:e._u([{key:"append",fn:function(){return[n("v-btn",{attrs:{icon:""},on:{click:e.updateTime}},[n("v-icon",[e._v("mdi-check")])],1)]},proxy:!0}],null,!1,2287443536),model:{value:e.timeInput,callback:function(t){e.timeInput=t},expression:"timeInput"}})],1):e._e()])],1)}),[],!1,null,null,null);t.default=component.exports;E()(component,{VBtn:N.a,VCardText:M.d,VCol:D.a,VExpandTransition:C.a,VIcon:_.a,VRow:D.d,VSimpleCheckbox:A.b,VSlideXReverseTransition:C.g,VTextField:R.a}),I()(component,{Ripple:T.a})},787:function(e,t,n){n(317)("replace")},805:function(e,t){e.exports=function(component,e){var t="function"==typeof component.exports?component.exports.extendOptions:component.options;for(var i in"function"==typeof component.exports&&(t.directives=component.exports.options.directives),t.directives=t.directives||{},e)t.directives[i]=t.directives[i]||e[i]}}}]);