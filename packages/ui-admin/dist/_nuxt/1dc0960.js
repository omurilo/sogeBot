(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{1563:function(e,t,n){"use strict";n.r(t);n(1),n(40),n(4),n(33),n(51),n(37),n(25),n(11),n(52),n(55),n(39),n(8),n(14),n(13),n(15);var r=n(2),o=(n(46),n(12),n(28),n(34),n(47),n(5)),l=n(21),c=n(49),v=n.n(c),f=n(779),m=n.n(f),d=n(804),y=n.n(d),O=n(173),j=n(141);function k(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function _(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){c=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var w={value:0,rank:"",type:"viewer"},x=Object(o.c)({props:{value:Object,rules:Object,types:Object},setup:function(e,t){var menu=Object(o.i)(!1),n=Object(o.i)(y()(e.value||w)),c=Object(o.i)(!0),form=Object(o.i)(null),f=Object(o.i)(""),d=Object(o.i)(!1),h=null,x=function t(){c.value=!0,form.value?(form.value.resetValidation(),n.value=y()(e.value||w)):setTimeout((function(){t()}),100)};Object(o.p)(menu,(function(e){e&&x()}));return{menu:menu,item:n,save:function(){if(form.value.validate()){for(var o=0,c=Object.keys(e.rules);o<c.length;o++){var v,f=c[o],m=_(e.rules[f]);try{for(m.s();!(v=m.n()).done;){var y=(0,v.value)(n.value[f]);if(!0!==y)return void j.a.$emit("snack","red","[".concat(f,"] - ").concat(y))}}catch(e){m.e(e)}finally{m.f()}}h=n.value.id?n.value.id:h||Object(O.a)(),console.log("Updating",n.value),d.value=!0,Object(l.getSocket)("/systems/ranks").emit("ranks::save",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?k(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):k(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({id:h},n.value),(function(e){d.value=!1,e?"string"==typeof e&&e.includes("UNIQUE constraint failed")&&j.a.$emit("snack","error","Type and hours/months must be unique."):(j.a.$emit("snack","success","Data updated."),t.emit("save"),menu.value=!1)}))}},translate:v.a,capitalize:m.a,valid:c,saving:d,form:form,group:f}}}),S=x,$=n(45),V=n(44),C=n.n(V),P=n(48),A=n(43),D=n(379),E=n(377),I=n(30),T=n(266),z=n(27),U=n(140),component=Object($.a)(S,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{persistent:"","max-width":"800",scrollable:"",fullscreen:e.$vuetify.breakpoint.mobile},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,o=t.attrs;return[void 0!==e.item.id?n("v-btn",e._g(e._b({staticClass:"primary-hover",attrs:{icon:""}},"v-btn",o,!1),r),[n("v-icon",[e._v("\n        mdi-pencil\n      ")])],1):n("v-btn",e._g(e._b({attrs:{color:"primary"}},"v-btn",o,!1),r),[e._v("\n      New item\n    ")])]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[e._v(" "),n("v-card",{staticClass:"pt-3",attrs:{outlined:""}},[n("v-card-text",[n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{attrs:{min:"0",label:e.$t("rank"),rules:e.rules.rank,required:""},model:{value:e.item.rank,callback:function(t){e.$set(e.item,"rank",e._n(t))},expression:"item.rank"}}),e._v(" "),n("v-text-field",{attrs:{type:"number",min:"0",label:e.capitalize(e.$t("viewer"===e.item.type?"hours":"months")),rules:e.rules.value,required:""},model:{value:e.item.value,callback:function(t){e.$set(e.item,"value",e._n(t))},expression:"item.value"}}),e._v(" "),n("v-select",{attrs:{label:e.capitalize(e.$t("type")),items:Object.keys(e.types||{}),"item-value":"name"},scopedSlots:e._u([{key:"item",fn:function(t){var n=t.item;return[e._v("\n            "+e._s(e.types&&e.types[n].name)+" time\n          ")]}},{key:"selection",fn:function(t){var n=t.item;return[e._v("\n            "+e._s(e.types&&e.types[n].name)+" time\n          ")]}}]),model:{value:e.item.type,callback:function(t){e.$set(e.item,"type",t)},expression:"item.type"}})],1)],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{text:""},on:{click:function(t){e.menu=!1}}},[e._v("\n        Close\n      ")]),e._v(" "),n("v-btn",{attrs:{color:"primary",loading:e.saving,text:"",disabled:!e.valid},on:{click:function(t){return e.save()}}},[e._v("\n        Save & Close\n      ")])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;C()(component,{VBtn:P.a,VCard:A.a,VCardActions:A.b,VCardText:A.d,VDialog:D.a,VForm:E.a,VIcon:I.a,VSelect:T.a,VSpacer:z.e,VTextField:U.a})}}]);