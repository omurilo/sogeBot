(window.webpackJsonp=window.webpackJsonp||[]).push([[161,97,112,137,138,139],{1454:function(e,t,n){"use strict";n.r(t);n(1),n(40),n(33),n(51),n(25),n(11),n(52),n(55);var r=n(10),o=n(26),l=n(35),c=(n(81),n(4),n(37),n(39),n(28),n(13),n(73),n(31),n(8),n(5)),d=n(770),v=n(21),f=n(49),m=n.n(f),_=n(54),h=n(776),y=n(80),x=n(141),k=n(266);function S(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){c=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var j=Object(c.c)({components:{"ranks-edit":Object(c.b)((function(){return Promise.all([n.e(1),n.e(26)]).then(n.bind(null,1562))})),"table-group-header":Object(c.b)((function(){return Promise.resolve().then(n.bind(null,966))})),"table-search-bar":Object(c.b)((function(){return Promise.resolve().then(n.bind(null,784))})),"table-mobile":Object(c.b)((function(){return Promise.resolve().then(n.bind(null,785))}))},setup:function(){var e={value:[k.h,Object(k.f)(0)],rank:[k.h]},t=Object(c.i)([]),n=Object(c.i)(""),f=Object(c.i)([]),O=Object(c.i)([]),j=Object(c.i)(!1);Object(c.p)(j,(function(e){e||(f.value=[])}));var w=Object(c.i)(!1),C=Object(c.i)({loading:!0}),K=[{value:"value",text:Object(_.capitalize)(m()("responses.variable.value"))},{value:"rank",text:m()("rank")}];Object(c.f)((function(){G()}));for(var G=function(){C.value.loading=!0,Object(v.getSocket)("/systems/ranks").emit("generic::getAll",(function(e,n){var r;if(e)return Object(y.a)(e);t.value=[].concat(Object(l.a)(n),Object(l.a)(JSON.parse(null!==(r=sessionStorage.getItem("ranks-pending"))&&void 0!==r?r:"[]"))),console.debug("Loaded",t.value),f.value.length>0&&f.value.forEach((function(e,n){e=t.value.find((function(t){return t.id===e.id}))||e,f.value[n]=e})),C.value.loading=!1}))},V=function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w.value=!1,e.next=3,Promise.all(f.value.map((function(e){return new Promise((function(t,n){e.id?Object(v.getSocket)("/systems/ranks").emit("ranks::remove",e.id,(function(e){e&&n(Object(y.a)(e)),t(!0)})):n(Object(y.a)("Missing item id"))}))})));case 3:G(),x.a.$emit("snack","success","Data removed."),f.value=[];case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(e){var n,o=S(t.value.filter((function(t){return t.type===e})));try{var l=function(){var e=n.value;if(!f.value.find((function(t){return t.id===e.id})))return{v:!1}};for(o.s();!(n=o.n()).done;){var c=l();if("object"===Object(r.a)(c))return c.v}}catch(e){o.e(e)}finally{o.f()}return!0},T={},A=0,D=["viewer","subscriber","follower"];A<D.length;A++){var $=D[A],M="Watch";"subscriber"===$&&(M="Sub"),"follower"===$&&(M="Follow"),T[$]={name:M,options:{filter:null,permission:null}}}return{addToSelectedItem:Object(h.a)(f,"id",O),items:t,search:n,state:C,headers:K,headersDelete:[{value:"rank",text:""},{value:"type",text:""}],selected:f,selectable:j,deleteSelected:V,deleteDialog:w,translate:m.a,rules:e,ButtonStates:d.ButtonStates,saveCurrentItems:function(e){O.value=e},isGroupSelected:I,toggleGroupSelection:function(e){if(I(e))f.value=f.value.filter((function(t){return t.type!==e}));else{var n,r=S(t.value.filter((function(t){return t.type===e})));try{var o=function(){var e=n.value;f.value.find((function(t){return t.id===e.id}))||f.value.push(e)};for(r.s();!(n=r.n()).done;)o()}catch(e){r.e(e)}finally{r.f()}}},getGroup:T,refresh:G}}}),w=j,C=n(45),K=n(44),G=n.n(K),V=n(271),I=n(48),T=n(43),A=n(27),D=n(269),$=n(378),M=n(68),P=n(30),component=Object(C.a)(w,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{class:{"pa-4":!e.$vuetify.breakpoint.mobile},attrs:{fluid:""}},[n("alert-disabled",{attrs:{system:"ranks"}}),e._v(" "),n("v-expand-transition",[e.selected.length>0?n("v-app-bar",{attrs:{color:"blue-grey darken-4",fixed:"",dense:""}},[n("v-row",{staticClass:"px-2",attrs:{dense:"",justify:"end"}},[n("v-col",{attrs:{cols:"auto","align-self":"center"}},[e._v("\n          "+e._s(e.selected.length)+" items selected\n        ")]),e._v(" "),n("v-col",{attrs:{cols:"auto","align-self":"center"}},[n("v-row",{attrs:{dense:""}},[e.selected.length>0?n("v-col",{attrs:{cols:"auto"}},[n("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,o=t.attrs;return[n("v-btn",e._g(e._b({staticClass:"error",attrs:{small:""}},"v-btn",o,!1),r),[n("v-icon",{attrs:{left:""}},[e._v("\n                      mdi-delete-forever\n                    ")]),e._v("\n                    Delete\n                  ")],1)]}}],null,!1,1576914152),model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[e._v(" "),n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Delete "+e._s(e.selected.length)+" Item(s)?")])]),e._v(" "),n("v-card-text",[n("v-data-table",{attrs:{dense:"",items:e.selected,headers:e.headersDelete,"items-per-page":-1,"hide-default-header":"","hide-default-footer":""},scopedSlots:e._u([{key:"item.type",fn:function(t){var n=t.item;return[e._v("\n                        "+e._s(e.getGroup[n.type].name)+" time\n                      ")]}}],null,!0)})],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{text:""},on:{click:function(t){e.deleteDialog=!1}}},[e._v("\n                      Cancel\n                    ")]),e._v(" "),n("v-btn",{attrs:{color:"error",text:""},on:{click:e.deleteSelected}},[e._v("\n                      Delete\n                    ")])],1)],1)],1)],1):e._e()],1)],1)],1)],1):e._e()],1),e._v(" "),n("v-data-table",{attrs:{"show-select":"","calculate-widths":"","group-by":"type",search:e.search,loading:e.state.loading,headers:e.headers,"items-per-page":-1,items:e.items},on:{"current-items":e.saveCurrentItems},scopedSlots:e._u([{key:"top",fn:function(){return[n("table-search-bar",{attrs:{search:e.search},on:{"update:search":function(t){e.search=t}}},[n("ranks-edit",{attrs:{rules:e.rules,types:e.getGroup},on:{save:function(t){return e.refresh()}}})],1)]},proxy:!0},{key:"group.header",fn:function(t){var r=t.items,o=t.isOpen,l=t.toggle;return[n("table-group-header",{attrs:{"is-open":o,toggle:l,"get-group":e.getGroup,"is-group-selected":e.isGroupSelected,"toggle-group-selection":e.toggleGroupSelection,"group-key":"type","no-filter":"","no-permission":"",items:r},scopedSlots:e._u([{key:"headerText",fn:function(t){var n=t.group;return[e._v("\n          "+e._s(e.getGroup[n].name)+" time\n        ")]}}],null,!0)})]}},{key:"item",fn:function(t){var r=t.item;return[n("table-mobile",{attrs:{headers:e.headers,selected:e.selected,item:r,"add-to-selected-item":e.addToSelectedItem},scopedSlots:e._u([{key:"actions",fn:function(){return[n("ranks-edit",{attrs:{rules:e.rules,value:r,types:e.getGroup},on:{save:function(t){return e.refresh()}}}),e._v(" "),n("v-btn",{staticClass:"danger-hover",attrs:{icon:""},on:{click:function(t){e.selected=[r],e.deleteDialog=!0}}},[n("v-icon",[e._v("\n              mdi-delete-forever\n            ")])],1)]},proxy:!0},{key:"value",fn:function(){return[e._v("\n          "+e._s(r.value)+" "+e._s(e.$t("viewer"===r.type?"hours":"months"))+"\n        ")]},proxy:!0}],null,!0)})]}}],null,!0),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)}),[],!1,null,null,null);t.default=component.exports;G()(component,{AlertDisabled:n(781).default,TableSearchBar:n(784).default,TableGroupHeader:n(966).default,TableMobile:n(785).default}),G()(component,{VAppBar:V.a,VBtn:I.a,VCard:T.a,VCardActions:T.b,VCardText:T.d,VCardTitle:T.e,VCol:A.a,VContainer:A.b,VDataTable:D.a,VDialog:$.a,VExpandTransition:M.a,VIcon:P.a,VRow:A.d,VSpacer:A.e})},770:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonStates=void 0,t.ButtonStates={idle:0,progress:1,success:2,fail:3}},776:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(35);n(94),n(8),n(4),n(82),n(51),n(37),n(213),n(214),n(215),n(216),n(217),n(218),n(219),n(220),n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(39);function o(e,t,n){var o=null,l="select";return function(c){var d=void 0===e.value?e:e.value,v=d.findIndex((function(e){return e[t]===c[t]})),f=!1;if(window.event&&(f=!!window.event.shiftKey),f){var m=n.value.findIndex((function(e){return e[t]===o})),_=n.value.findIndex((function(e){return e[t]===c[t]}));if("select"===l)for(var i=Math.min(m,_);i<=Math.max(m,_);i++)d.push(n.value[i]);else d=d.filter((function(e){for(var t=!0,r=Math.min(m,_);r<=Math.max(m,_);r++)if(e===n.value[r]){t=!1;break}return t}))}else o=c[t],-1===v?(d.push(c),l="select"):(d.splice(v,1),l="unselect");d=Array.from(new Set(Object(r.a)(d))),console.log(d)}}},781:function(e,t,n){"use strict";n.r(t);n(73),n(4),n(33);var r=n(5),o=n(49),l=n.n(o),c=n(1),d=Object(c.h)({props:{system:String,integration:String},setup:function(e){var t=Object(r.o)();return{isEnabled:Object(c.b)((function(){return e.system?t.state.$systems.find((function(t){return t.name===e.system})).enabled:!!e.integration&&t.state.$integrations.find((function(t){return t.name===e.integration})).enabled})),translate:l.a}}}),v=n(45),f=n(44),m=n.n(f),_=n(379),component=Object(v.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isEnabled?e._e():n("v-alert",{staticClass:"mb-0",attrs:{color:"error",text:""}},[e._v("\n  "+e._s(e.translate("this-system-is-disabled"))+"\n")])}),[],!1,null,null,null);t.default=component.exports;m()(component,{VAlert:_.a})},784:function(e,t,n){"use strict";n.r(t);n(25),n(230);var r=n(1),o=Object(r.h)({props:{search:String,label:String},setup:function(e,t){var n=Object(r.J)(e.search),o=e.label?e.label:"Search";return Object(r.Y)(n,(function(e){t.emit("update:search",e)})),{searchModel:n,searchLabel:o}}}),l=n(45),c=n(44),d=n.n(c),v=n(27),f=n(134),m=n(140),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-sheet",{staticClass:"my-2 pb-2 mt-0",attrs:{flat:"",color:"dark"}},[n("v-row",{staticClass:"px-2",attrs:{dense:""}},[n("v-col",{attrs:{"align-self":"center"}},[n("v-text-field",{staticClass:"pa-0 ma-2",attrs:{"append-icon":"mdi-magnify",label:e.searchLabel,"single-line":"","hide-details":""},model:{value:e.searchModel,callback:function(t){e.searchModel=t},expression:"searchModel"}})],1),e._v(" "),void 0!==e.$slots.default?n("v-col",{attrs:{cols:"auto","align-self":"center"}},[e._t("default")],2):e._e()],1)],1)}),[],!1,null,null,null);t.default=component.exports;d()(component,{VCol:v.a,VRow:v.d,VSheet:f.a,VTextField:m.a})},785:function(e,t,n){"use strict";n.r(t);var r=n(1),o=Object(r.h)({props:{selected:Array,headers:Array,item:Object,addToSelectedItem:Function,itemKey:String}}),l=n(45),c=n(44),d=n.n(c),v=n(268),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.headers.length?n("tr",{class:{"v-data-table__selected":e.selected&&e.selected.some((function(t){return(e.itemKey?t[e.itemKey]:t.id)===(e.itemKey?e.item[e.itemKey]:e.item.id)})),"v-data-table__mobile-table-row":e.$vuetify.breakpoint.mobile}},[e.$vuetify.breakpoint.mobile?[n("td",{staticClass:"v-data-table__mobile-row"},[n("div",[e.selected?n("v-simple-checkbox",{attrs:{value:e.selected.some((function(t){return(e.itemKey?t[e.itemKey]:t.id)===(e.itemKey?e.item[e.itemKey]:e.item.id)}))},on:{click:function(t){return e.addToSelectedItem(e.item)}}}):e._e()],1),e._v(" "),n("div",{staticClass:"v-data-table__mobile-row__cell d-flex"},[e._t("actions")],2)]),e._v(" "),e._l(e.headers.filter((function(e){return"actions"!==e.value})),(function(header){return n("td",{key:header.value,staticClass:"v-data-table__mobile-row"},[n("div",{staticClass:"v-data-table__mobile-row__header"},[e._v("\n        "+e._s(header.text)+"\n      ")]),e._v(" "),n("div",{staticClass:"v-data-table__mobile-row__cell"},[e._t(header.value,(function(){return["boolean"==typeof e.item[header.value]?n("v-simple-checkbox",{attrs:{value:e.item[header.value],disabled:""}}):[e._v("\n            "+e._s(e.item[header.value])+"\n          ")]]}))],2)])}))]:[n("td",[n("div",{staticClass:"d-flex"},[e.selected?n("v-simple-checkbox",{attrs:{value:e.selected.some((function(t){return(e.itemKey?t[e.itemKey]:t.id)===(e.itemKey?e.item[e.itemKey]:e.item.id)}))},on:{click:function(t){return e.addToSelectedItem(e.item)}}}):e._e()],1)]),e._v(" "),e._l(e.headers.filter((function(e){return"actions"!==e.value})),(function(header){return n("td",{key:header.value,staticClass:"pa-2 mx-4",class:{"text-center":"center"===header.align,"text-right":"right"===header.align}},[e._t(header.value,(function(){return["boolean"==typeof e.item[header.value]?n("v-simple-checkbox",{attrs:{value:e.item[header.value],disabled:""}}):[e._v("\n          "+e._s(e.item[header.value])+"\n        ")]]}))],2)})),e._v(" "),n("td",[n("div",{staticClass:"d-flex",staticStyle:{"justify-content":"right"}},[e._t("actions")],2)])]],2):e._e()}),[],!1,null,null,null);t.default=component.exports;d()(component,{VSimpleCheckbox:v.b})},797:function(e,t,n){var content=n(825);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(20).default)("6165de88",content,!0,{sourceMap:!1})},824:function(e,t,n){"use strict";n(797)},825:function(e,t,n){var r=n(19)((function(i){return i[1]}));r.push([e.i,"div.header[data-v-42f26eeb]{padding:1rem;border-bottom:1px solid #383838}",""]),r.locals={},e.exports=r},966:function(e,t,n){"use strict";n.r(t);var r=n(5),o=Object(r.c)({props:{isOpen:Boolean,toggle:Function,isGroupSelected:Function,toggleGroupSelection:Function,items:Array,getGroup:Object,groupKey:String,noFilter:Boolean,noPermission:Boolean}}),l=(n(824),n(45)),c=n(44),d=n.n(c),v=n(27),f=n(30),m=n(268),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.$vuetify.breakpoint.mobile?n("div",{staticClass:"header"},[n("v-row",{attrs:{"no-gutters":""}},[n("v-col",[n("v-icon",{on:{click:e.toggle}},[e._v("\n      "+e._s(e.isOpen?"mdi-minus":"mdi-plus")+"\n    ")]),e._v(" "),n("v-simple-checkbox",{staticClass:"d-inline-block px-4",staticStyle:{transform:"translateY(5px)"},attrs:{inline:"",value:e.isGroupSelected(e.items[0][e.groupKey||"group"])},on:{click:function(t){return e.toggleGroupSelection(e.items[0][e.groupKey||"group"])}}}),e._v(" "),null===e.items[0][e.groupKey||"group"]?n("span",{staticClass:"red--text text--lighten-1"},[e._v("Ungrouped")]):n("span",[e._t("headerText",(function(){return[e._v("\n        "+e._s(e.items[0][e.groupKey||"group"])+"\n      ")]}),{group:e.items[0][e.groupKey||"group"]}),e._v(" "),e.noPermission?e._e():n("span",{staticClass:"px-4",class:e.getGroup[e.items[0][e.groupKey||"group"]].options.permission?"":"red--text"},[e._v("\n        "+e._s(e.getGroup[e.items[0][e.groupKey||"group"]].options.permission?e.getPermissionName(e.getGroup[e.items[0][e.groupKey||"group"]].options.permission,e.permissions):"-- unset --")+"\n      ")]),e._v(" "),e.noFilter?e._e():n("span",{staticClass:"px-4"},[e.getGroup[e.items[0][e.groupKey||"group"]].options.filter?[n("v-icon",[e._v("mdi-filter")]),e._v(" "),n("code",[e._v("\n            "+e._s(e.getGroup[e.items[0][e.groupKey||"group"]].options.filter)+"\n          ")])]:[n("v-icon",[e._v("mdi-filter-off")]),e._v(" "),n("span",{staticClass:"grey--text text--darken-2"},[e._v("No filters set")])]],2)],2)],1),e._v(" "),n("v-col",{attrs:{cols:"auto","align-self":"end"}},[e._t("config")],2)],1)],1):n("th",{attrs:{colspan:"100%"}},[n("v-row",{attrs:{"no-gutters":""}},[n("v-col",[n("v-icon",{on:{click:e.toggle}},[e._v("\n      "+e._s(e.isOpen?"mdi-minus":"mdi-plus")+"\n    ")]),e._v(" "),n("v-simple-checkbox",{staticClass:"d-inline-block px-4",staticStyle:{transform:"translateY(5px)"},attrs:{inline:"",value:e.isGroupSelected(e.items[0][e.groupKey||"group"])},on:{click:function(t){return e.toggleGroupSelection(e.items[0][e.groupKey||"group"])}}}),e._v(" "),null===e.items[0][e.groupKey||"group"]?n("span",{staticClass:"red--text text--lighten-1"},[e._v("Ungrouped")]):n("span",[e._t("headerText",(function(){return[e._v("\n        "+e._s(e.items[0][e.groupKey||"group"])+"\n      ")]}),{group:e.items[0][e.groupKey||"group"]}),e._v(" "),e.noPermission?e._e():n("span",{staticClass:"px-4",class:e.getGroup[e.items[0][e.groupKey||"group"]].options.permission?"":"red--text"},[e._v("\n        "+e._s(e.getGroup[e.items[0][e.groupKey||"group"]].options.permission?e.getPermissionName(e.getGroup[e.items[0][e.groupKey||"group"]].options.permission,e.permissions):"-- unset --")+"\n      ")]),e._v(" "),e.noFilter?e._e():n("span",{staticClass:"px-4"},[e.getGroup[e.items[0][e.groupKey||"group"]].options.filter?[n("v-icon",[e._v("mdi-filter")]),e._v(" "),n("code",[e._v("\n            "+e._s(e.getGroup[e.items[0][e.groupKey||"group"]].options.filter)+"\n          ")])]:[n("v-icon",[e._v("mdi-filter-off")]),e._v(" "),n("span",{staticClass:"grey--text text--darken-2"},[e._v("No filters set")])]],2)],2)],1),e._v(" "),n("v-col",{attrs:{cols:"auto","align-self":"end"}},[e._t("config")],2)],1)],1)}),[],!1,null,"42f26eeb",null);t.default=component.exports;d()(component,{VCol:v.a,VIcon:f.a,VRow:v.d,VSimpleCheckbox:m.b})}}]);