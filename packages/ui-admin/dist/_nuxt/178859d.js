(window.webpackJsonp=window.webpackJsonp||[]).push([[181],{1048:function(e,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"randomizerGetAll"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"permissions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"randomizers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"command"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"permissionId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isShown"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"shouldPlayTick"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tickVolume"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"widgetOrder"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"position"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"x"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"y"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"anchorX"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"anchorY"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"customizationFont"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"family"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"size"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"weight"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"borderColor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"borderPx"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"shadow"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shiftRight"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"shiftDown"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"blur"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"opacity"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"tts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"enabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"voice"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pitch"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"volume"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rate"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"groupId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"numOfDuplicates"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"minimalSpacing"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"order"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:539}};t.loc.source={body:"query randomizerGetAll {\n  permissions { id name }\n  randomizers {\n    id\n    createdAt\n    command\n    permissionId\n    name\n    isShown\n    shouldPlayTick\n    tickVolume\n    widgetOrder\n    type\n    position {\n      x y anchorX anchorY\n    }\n    customizationFont {\n      family color size weight borderColor borderPx\n      shadow {\n        shiftRight shiftDown blur opacity color\n      }\n    }\n    tts {\n      enabled voice pitch volume rate\n    }\n    items {\n      id groupId name color numOfDuplicates minimalSpacing order\n    }\n  }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};function r(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){r(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){r(e,n)})),e.definitions&&e.definitions.forEach((function(e){r(e,n)}))}var o={};function d(e,n){for(var i=0;i<e.definitions.length;i++){var element=e.definitions[i];if(element.name&&element.name.value==n)return element}}t.definitions.forEach((function(e){if(e.name){var n=new Set;r(e,n),o[e.name.value]=n}})),e.exports=t,e.exports.randomizerGetAll=function(e,n){var t={kind:e.kind,definitions:[d(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var r=o[n]||new Set,l=new Set,c=new Set;for(r.forEach((function(e){c.add(e)}));c.size>0;){var m=c;c=new Set,m.forEach((function(e){l.has(e)||(l.add(e),(o[e]||new Set).forEach((function(e){c.add(e)})))}))}return l.forEach((function(n){var r=d(e,n);r&&t.definitions.push(r)})),t}(t,"randomizerGetAll")},1267:function(e,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"randomizersRemove"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"randomizersRemove"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[]}]}}],loc:{start:0,end:73}};t.loc.source={body:"mutation randomizersRemove($id: String!) {\n  randomizersRemove(id: $id)\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};function r(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){r(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){r(e,n)})),e.definitions&&e.definitions.forEach((function(e){r(e,n)}))}var o={};function d(e,n){for(var i=0;i<e.definitions.length;i++){var element=e.definitions[i];if(element.name&&element.name.value==n)return element}}t.definitions.forEach((function(e){if(e.name){var n=new Set;r(e,n),o[e.name.value]=n}})),e.exports=t,e.exports.randomizersRemove=function(e,n){var t={kind:e.kind,definitions:[d(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var r=o[n]||new Set,l=new Set,c=new Set;for(r.forEach((function(e){c.add(e)}));c.size>0;){var m=c;c=new Set,m.forEach((function(e){l.has(e)||(l.add(e),(o[e]||new Set).forEach((function(e){c.add(e)})))}))}return l.forEach((function(n){var r=d(e,n);r&&t.definitions.push(r)})),t}(t,"randomizersRemove")},1268:function(e,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"randomizersSave"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"data_json"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"randomizersSave"},arguments:[{kind:"Argument",name:{kind:"Name",value:"data"},value:{kind:"Variable",name:{kind:"Name",value:"data_json"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:92}};t.loc.source={body:"mutation randomizersSave($data_json: String!) {\n  randomizersSave(data: $data_json) { id }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};function r(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){r(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){r(e,n)})),e.definitions&&e.definitions.forEach((function(e){r(e,n)}))}var o={};function d(e,n){for(var i=0;i<e.definitions.length;i++){var element=e.definitions[i];if(element.name&&element.name.value==n)return element}}t.definitions.forEach((function(e){if(e.name){var n=new Set;r(e,n),o[e.name.value]=n}})),e.exports=t,e.exports.randomizersSave=function(e,n){var t={kind:e.kind,definitions:[d(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var r=o[n]||new Set,l=new Set,c=new Set;for(r.forEach((function(e){c.add(e)}));c.size>0;){var m=c;c=new Set,m.forEach((function(e){l.has(e)||(l.add(e),(o[e]||new Set).forEach((function(e){c.add(e)})))}))}return l.forEach((function(n){var r=d(e,n);r&&t.definitions.push(r)})),t}(t,"randomizersSave")},1467:function(e,n,t){"use strict";t.r(n);var r,o=t(1),d=t(60),l=(t(12),t(11),t(8),t(14),t(15),t(147)),c=t(2),m=t(26),v=(t(81),t(4),t(13),t(73),t(37),t(39),t(31),t(176),t(177),t(178),t(179),t(180),t(181),t(182),t(183),t(184),t(185),t(186),t(187),t(188),t(189),t(33),t(63),t(46),t(21)),f=t(49),k=t.n(f),h=t(148),S=t(54),y=t(173),N=t(776),w=t(80),O=t(141),F=t(782),x=t(1048),j=t.n(x),_=t(1267),D=t.n(_),z=t(1268),V=t.n(z);function E(object,e){var n=Object.keys(object);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(object);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),n.push.apply(n,t)}return n}function I(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?E(Object(source),!0).forEach((function(n){Object(c.a)(e,n,source[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):E(Object(source)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(source,n))}))}return e}var P=Object(o.h)({setup:function(){var e=Object(o.J)(!0),n=Object(o.J)([]),t=Object(o.J)([]),c=Object(d.d)().$graphql,f=function(){var r=Object(m.a)(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c.default.request(j.a);case 2:o=r.sent,_.value.length>0&&_.value.forEach((function(e,n){e=o.randomizers.find((function(n){return n.id===e.id}))||e,_.value[n]=e})),n.value=Object(S.cloneDeep)(o.randomizers),t.value=Object(S.cloneDeep)(o.permissions),e.value=!1;case 7:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),x=Object(o.J)(""),_=Object(o.J)([]),z=Object(o.J)([]),E=Object(o.J)(!1),P=Object(o.J)(!1),C=Object(o.J)(!1);Object(o.Y)(C,(function(e){e||(_.value=[])}));var T=[{value:"name",text:k()("timers.dialog.name")},{value:"command",text:k()("registry.randomizer.form.command")},{value:"permissionId",text:k()("registry.randomizer.form.permission")},{value:"items",text:k()("registry.randomizer.form.options"),sortable:!1},{value:"actions",text:"",sortable:!1},{text:"",value:"data-table-expand"}],R=[{value:"name",text:k()("timers.dialog.name")},{value:"command",text:k()("registry.randomizer.form.command")},{value:"items",text:"Items"}];Object(o.A)((function(){f()}));var $=function(){var e=Object(m.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E.value=!1,e.next=3,Promise.all(_.value.map(function(){var e=Object(m.a)(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.default.request(D.a,{id:n.id});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()));case 3:_.value.forEach((function(e){return c.default.request(D.a,{id:e.id})})),_.value=[],O.a.$emit("snack","success","Data removed."),f();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{items:n,search:x,headers:T,headersDelete:R,selected:_,deleteSelected:$,selectable:C,deleteDialog:E,translate:k.a,currentItems:z,permissions:t,spin:P,loading:e,addToSelectedItem:Object(N.a)(_,"id",z),clone:function(e){var n=Object(y.a)(),t=new Map,r=e.items.map((function(e){return t.set(e.id,Object(y.a)()),I(I({},e),{},{id:t.get(e.id)})})),o=I(I({},e),{},{isShown:!1,id:n,name:e.name+" (clone)",command:"!".concat(Math.random().toString(36).substr(2,5)),items:r.map((function(e){return I(I({},e),{},{groupId:null===e.groupId?e.groupId:t.get(e.groupId)})}))});c.default.request(V.a,{data_json:JSON.stringify(o)}).then((function(){return O.a.$emit("snack","success","Data saved.")})).catch((function(e){return Object(w.a)(e)})).finally((function(){return f()}))},saveCurrentItems:function(e){z.value=e},getPermissionName:F.a,toggleVisibility:function(e){e.isShown=!e.isShown,c.default.request(Object(h.a)(r||(r=Object(l.a)(["mutation randomizerSetVisibility($id: String!, $value: Boolean!) { randomizerSetVisibility(id: $id, value: $value) }"]))),{id:e.id,value:e.isShown}).then((function(){return O.a.$emit("snack","success","Visibility changed.")})).catch((function(e){return Object(w.a)(e)})).finally((function(){return f()}))},startSpin:function(){P.value=!0,Object(v.getSocket)("/registries/randomizer").emit("randomizer::startSpin"),setTimeout((function(){P.value=!1}),5e3)},orderBy:S.orderBy}}}),C=P,T=t(45),R=t(44),$=t.n(R),A=t(48),J=t(43),G=t(27),M=t(269),B=t(378),L=t(383),Q=t(30),Y=t(143),X=t(134),H=t(140),component=Object(T.a)(C,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-container",{class:{"pa-4":!e.$vuetify.breakpoint.mobile},attrs:{fluid:""}},[t("v-data-table",{attrs:{"show-select":e.selectable,search:e.search,loading:e.loading,headers:e.headers,"items-per-page":-1,items:e.items,"sort-by":"name"},on:{"current-items":e.saveCurrentItems,"click:row":e.addToSelectedItem},scopedSlots:e._u([{key:"top",fn:function(){return[t("v-sheet",{staticClass:"my-2 pb-2 mt-0",attrs:{flat:"",color:"dark"}},[t("v-row",{staticClass:"px-2",attrs:{"no-gutters":""}},[t("v-col",{staticClass:"pr-2",attrs:{cols:"auto","align-self":"center"}},[t("v-btn",{attrs:{icon:"",color:e.selectable?"primary":"secondary"},on:{click:function(n){e.selectable=!e.selectable}}},[t("v-icon",[e._v("\n                mdi-checkbox-multiple-marked-outline\n              ")])],1)],1),e._v(" "),t("v-col",{attrs:{"align-self":"center"}},[t("v-text-field",{staticClass:"pa-0 ma-2",attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(n){e.search=n},expression:"search"}})],1),e._v(" "),t("v-col",{attrs:{cols:"auto","align-self":"center"}},[e.selected.length>0?[t("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(n){var r=n.on,o=n.attrs;return[t("v-btn",e._g(e._b({staticClass:"mr-1",attrs:{color:"error"}},"v-btn",o,!1),r),[e._v("\n                    Delete "+e._s(e.selected.length)+" Item(s)\n                  ")])]}}],null,!1,1852500087),model:{value:e.deleteDialog,callback:function(n){e.deleteDialog=n},expression:"deleteDialog"}},[e._v(" "),t("v-card",[t("v-card-title",[t("span",{staticClass:"headline"},[e._v("Delete "+e._s(e.selected.length)+" Item(s)?")])]),e._v(" "),t("v-card-text",[t("v-data-table",{attrs:{dense:"",items:e.selected,headers:e.headersDelete,"items-per-page":-1,"hide-default-header":"","hide-default-footer":""},scopedSlots:e._u([{key:"item.items",fn:function(n){var t=n.item;return[e._v("\n                        "+e._s(t.items.map((function(e){return e.name})).join(", "))+"\n                      ")]}}],null,!0)})],1),e._v(" "),t("v-card-actions",[t("v-spacer"),e._v(" "),t("v-btn",{attrs:{text:""},on:{click:function(n){e.deleteDialog=!1}}},[e._v("\n                      Cancel\n                    ")]),e._v(" "),t("v-btn",{attrs:{color:"error",text:""},on:{click:e.deleteSelected}},[e._v("\n                      Delete\n                    ")])],1)],1)],1)]:e._e(),e._v(" "),t("v-btn",{attrs:{color:"primary",to:"/registry/randomizer/new",nuxt:""}},[e._v("\n              New Item\n            ")])],2)],1)],1)]},proxy:!0},{key:"item.items",fn:function(n){var t=n.item;return[e._v("\n      "+e._s(Array.from(new Set(e.orderBy(t.items,"order").map((function(e){return e.name})))).join(", "))+"\n    ")]}},{key:"item.permissionId",fn:function(n){var t=n.item;return[e._v("\n      "+e._s(e.getPermissionName(t.permissionId,e.permissions))+"\n    ")]}},{key:"item.actions",fn:function(n){var r=n.item;return[t("div",{staticStyle:{width:"max-content"}},[t("v-hover",{scopedSlots:e._u([{key:"default",fn:function(n){var o=n.hover;return[t("v-btn",{attrs:{icon:"",color:o?"primary":"secondary lighten-3",nuxt:"",to:"/registry/randomizer/"+r.id},on:{click:function(e){e.stopPropagation()}}},[t("v-icon",[e._v("mdi-pencil")])],1)]}}],null,!0)}),e._v(" "),t("v-hover",{scopedSlots:e._u([{key:"default",fn:function(n){var o=n.hover;return[t("v-btn",{attrs:{icon:"",color:o?"primary":"secondary lighten-3"},on:{click:function(n){return n.stopPropagation(),e.toggleVisibility(r)}}},[t("v-icon",[e._v(e._s(r.isShown?"mdi-eye":"mdi-eye-off"))])],1)]}}],null,!0)}),e._v(" "),t("v-hover",{scopedSlots:e._u([{key:"default",fn:function(n){var r=n.hover;return[t("v-btn",{attrs:{icon:"",color:r?"primary":"secondary lighten-3",disabled:e.spin},on:{click:function(n){return n.stopPropagation(),e.startSpin.apply(null,arguments)}}},[e.spin?t("v-progress-circular",{attrs:{indeterminate:"",size:"20"}}):t("v-icon",[e._v("\n              mdi-play\n            ")])],1)]}}],null,!0)}),e._v(" "),t("v-hover",{scopedSlots:e._u([{key:"default",fn:function(n){var o=n.hover;return[t("v-btn",{attrs:{icon:"",color:o?"primary":"secondary lighten-3"},on:{click:function(n){return n.stopPropagation(),e.clone(r)}}},[t("v-icon",[e._v("mdi-content-copy")])],1)]}}],null,!0)})],1)]}}],null,!0),model:{value:e.selected,callback:function(n){e.selected=n},expression:"selected"}})],1)}),[],!1,null,null,null);n.default=component.exports;$()(component,{VBtn:A.a,VCard:J.a,VCardActions:J.b,VCardText:J.d,VCardTitle:J.e,VCol:G.a,VContainer:G.b,VDataTable:M.a,VDialog:B.a,VHover:L.a,VIcon:Q.a,VProgressCircular:Y.a,VRow:G.d,VSheet:X.a,VSpacer:G.e,VTextField:H.a})},776:function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));var r=t(35);t(94),t(8),t(4),t(82),t(51),t(37),t(213),t(214),t(215),t(216),t(217),t(218),t(219),t(220),t(221),t(222),t(223),t(224),t(225),t(226),t(227),t(228),t(229),t(39);function o(e,n,t){var o=null,d="select";return function(l){var c=void 0===e.value?e:e.value,m=c.findIndex((function(e){return e[n]===l[n]})),v=!1;if(window.event&&(v=!!window.event.shiftKey),v){var f=t.value.findIndex((function(e){return e[n]===o})),k=t.value.findIndex((function(e){return e[n]===l[n]}));if("select"===d)for(var i=Math.min(f,k);i<=Math.max(f,k);i++)c.push(t.value[i]);else c=c.filter((function(e){for(var n=!0,r=Math.min(f,k);r<=Math.max(f,k);r++)if(e===t.value[r]){n=!1;break}return n}))}else o=l[n],-1===m?(c.push(l),d="select"):(c.splice(m,1),d="unselect");c=Array.from(new Set(Object(r.a)(c))),console.log(c)}}},782:function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));t(73),t(4),t(71),t(33);var r=function(e,n){if(!n)throw new Error("Missing permissions list");if(!e)return"-- unset --";var t=n.find((function(n){return n.id===e}));return void 0!==t?""===t.name.trim()?t.id:t.name:null}}}]);