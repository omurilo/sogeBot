(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{1006:function(e,t,n){"use strict";n.r(t);var r=n(20),o=(n(78),n(70),n(77),n(87),n(11),n(479),n(807),n(813)),c=n(814),f=n(998),l=n(997),h=n(815);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var o=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var d=function(e){Object(f.a)(n,e);var t=m(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n)}(n(816).TypedEmitter),v=(new d,function(e,t){var n=function(data){console.debug("obs::websocket::on:switchscenes ".concat(data["scene-name"])),null==t||t.emit("integration::obswebsocket::event",{type:"obs-scene-changed",sceneName:data["scene-name"],location:window.location.href})};e.off("SwitchScenes",n).on("SwitchScenes",n)}),w=function(e){var t="Unknown error: "+JSON.stringify(e);"NOT_CONNECTED"===e.code&&(t="OBSWEBSOCKET: Not connected to OBS Websocket."),console.error(t)},k=function(e){return new Promise((function(t){e.send("GetSceneList").then((function(e){t(e.scenes)})).catch((function(e){w(e),t([])}))}))},S=function(e){return new Promise((function(t){e.send("GetSourcesList").then((function(e){t(e.sources)})).catch((function(e){w(e),t([])}))}))},y=function(e){return new Promise((function(t){e.send("GetSourceTypesList").then((function(e){t(e.types)})).catch((function(e){w(e),t([])}))}))},x=(n(818),n(819),n(820),n(827),n(833),n(839),n(851),n(852),n(853),n(857)),O=(n(858),n(859),n(591),n(862),n(672)),R=n(722),P=n.n(R),j=n(965),B=n.n(j),T=(n(966),{SetCurrentScene:function(e,t){try{return e.send("SetCurrentScene",{"scene-name":t})}catch(e){w(e)}},StartReplayBuffer:function(e){return new Promise((function(t){e.send("StartReplayBuffer").then((function(){t(!0)})).catch((function(e){w(e),t(!1)}))}))},StopReplayBuffer:function(e){return new Promise((function(t){e.send("StopReplayBuffer").then((function(){t(!0)})).catch((function(e){w(e),t(!1)}))}))},SaveReplayBuffer:function(e){return new Promise((function(t){e.send("SaveReplayBuffer").then((function(){t(!0)})).catch((function(e){w(e),t(!1)}))}))},WaitMs:function(e,t){return new Promise((function(e){return setTimeout(e,t,null)}))},Log:function(e,t){P.a.post("/integrations/obswebsocket/log",{message:t}),console.error(t)},StartRecording:function(e){return new Promise((function(t){e.send("StartRecording").then((function(){t(!0)})).catch((function(e){w(e),t(!1)}))}))},StopRecording:function(e){return new Promise((function(t){e.send("StopRecording").then((function(){t(!0)})).catch((function(e){w(e),t(!1)}))}))},PauseRecording:function(e){return new Promise((function(t){e.send("PauseRecording").then((function(){t(!0)})).catch((function(e){w(e),t(!1)}))}))},ResumeRecording:function(e){return new Promise((function(t){e.send("ResumeRecording").then((function(){t(!0)})).catch((function(e){w(e),t(!1)}))}))},SetMute:function(e,source,t){return new Promise((function(n){e.send("SetMute",{source:source,mute:t}).then((function(){n(!0)})).catch((function(e){w(e),n(!1)}))}))},SetVolume:function(e,source,t){return new Promise((function(n){e.send("SetVolume",{source:source,volume:t,useDecibel:!0}).then((function(){n(!0)})).catch((function(e){w(e),n(!1)}))}))}});function C(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,f=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){f=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(f)throw o}}}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var I=[],M=function(){var e=Object(x.a)(regeneratorRuntime.mark((function e(t,n){var r,o,c,f,l,h,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=null!==(r=n.hash)&&void 0!==r?r:Object(O.createHash)("sha256").update(JSON.stringify(n.tasks)).digest("base64"),c=n.tasks,!I.includes(o)){e.next=6;break}return e.next=5,new Promise((function(e){setTimeout((function(){return e(!0)}),1)}));case 5:return e.abrupt("return",M(t,n));case 6:if(I.push(o),e.prev=7,"string"!=typeof c){e.next=14;break}return f="(async function evaluation () { ".concat(c," })()"),e.next=12,B()(f,{event:n.attributes,obs:t,waitMs:function(e){return new Promise((function(t){return setTimeout(t,e,null)}))},log:function(e){P.a.post("/integrations/obswebsocket/log",{message:e}),console.error(e)}});case 12:e.next=49;break;case 14:l=C(c),e.prev=15,l.s();case 17:if((h=l.n()).done){e.next=41;break}m=h.value,e.t0=m.event,e.next="Log"===e.t0?22:"WaitMs"===e.t0?25:"SetCurrentScene"===e.t0?28:"SetMute"===e.t0?31:"SetVolume"===e.t0?34:37;break;case 22:return e.next=24,T[m.event](t,m.args.logMessage);case 24:return e.abrupt("break",39);case 25:return e.next=27,T[m.event](t,m.args.miliseconds);case 27:return e.abrupt("break",39);case 28:return e.next=30,T[m.event](t,m.args.sceneName);case 30:return e.abrupt("break",39);case 31:return e.next=33,T[m.event](t,m.args.source,m.args.mute);case 33:return e.abrupt("break",39);case 34:return e.next=36,T[m.event](t,m.args.source,m.args.volume);case 36:return e.abrupt("break",39);case 37:return e.next=39,T[m.event](t);case 39:e.next=17;break;case 41:e.next=46;break;case 43:e.prev=43,e.t1=e.catch(15),l.e(e.t1);case 46:return e.prev=46,l.f(),e.finish(46);case 49:e.next=55;break;case 51:throw e.prev=51,e.t2=e.catch(7),console.error(e.t2),e.t2;case 55:return e.prev=55,I.splice(I.indexOf(o),1),e.finish(55);case 58:case"end":return e.stop()}}),e,null,[[7,51,55,58],[15,43,46,49]])})));return function(t,n){return e.apply(this,arguments)}}(),N=n(971),L=n(170),W=n(3),A=n(972),J=n.n(A),D={};D.props={opts:{key:"opts",required:!0,type:Object}},D.setup=function(e,t){var n=e,o=new J.a;o.on("error",(function(e){console.error("socket error:",e),setTimeout((function(){f()}),1e3)}));var address="",c="",f=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,""!==c){e.next=6;break}return e.next=4,o.connect({address:address});case 4:e.next=8;break;case 6:return e.next=8,o.connect({address:address,password:c});case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),setTimeout((function(){f()}),1e3);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(W.onMounted)(Object(r.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("====== OBS WEBSOCKET ======"),!(n.opts.allowedIPs.length>0)){e.next=13;break}return e.next=4,Object(N.getCurrentIP)();case 4:if(t=e.sent,!n.opts.allowedIPs.includes(t)){e.next=9;break}console.log("IP ".concat(t," have access to this OBSWebsocket overlay.")),e.next=11;break;case 9:return console.error("IP ".concat(t," DON'T have access to this OBSWebsocket overlay.")),e.abrupt("return");case 11:e.next=14;break;case 13:console.log("There is no IP restrictions set.");case 14:return e.next=16,new Promise((function(e,t){Object(L.getSocket)("/integrations/obswebsocket",!0).emit("get.value","address",(function(n,r){n?t(n):e(r)}))}));case 16:return address=e.sent,e.next=19,new Promise((function(e,t){Object(L.getSocket)("/integrations/obswebsocket",!0).emit("get.value","password",(function(n,r){n?t(n):e(r)}))}));case 19:c=e.sent,f(),Object(L.getSocket)("/integrations/obswebsocket",!0).on("integration::obswebsocket::trigger",function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("integration::obswebsocket::trigger",t),n(),e.prev=2,e.next=5,M(o,t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}()),Object(L.getSocket)("/integrations/obswebsocket",!0).on("integration::obswebsocket::function",function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.debug("integration::obswebsocket::function",t),e.t0=t,e.next="getSourcesList"===e.t0?4:"getTypesList"===e.t0?9:"listScenes"===e.t0?14:19;break;case 4:return e.t1=n,e.next=7,S(o);case 7:return e.t2=e.sent,e.abrupt("return",(0,e.t1)(e.t2));case 9:return e.t3=n,e.next=12,y(o);case 12:return e.t4=e.sent,e.abrupt("return",(0,e.t3)(e.t4));case 14:return e.t5=n,e.next=17,k(o);case 17:return e.t6=e.sent,e.abrupt("return",(0,e.t5)(e.t6));case 19:console.error("Unknown function");case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),v(o,Object(L.getSocket)("/integrations/obswebsocket",!0));case 24:case"end":return e.stop()}}),e)})))),{}};var G=D,U=n(95),component=Object(U.a)(G,(function(){var e=this.$createElement;return(this._self._c||e)("div")}),[],!1,null,null,null);t.default=component.exports},909:function(e,t){}}]);