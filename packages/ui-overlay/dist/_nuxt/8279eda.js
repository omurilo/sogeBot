(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{485:function(module,__webpack_exports__,__webpack_require__){"use strict";var _app__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(45),_vue_composition_api__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3),core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(44),core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(36),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_from_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(66),core_js_modules_es_array_from_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_from_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(43),core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(24),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(22),core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(49),core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(59),core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(38),core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_10__),_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(20),regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(78),regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(11),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_13__),core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(70),core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_14__),core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(77),core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_15__),core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(87),core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_16__),_sogebot_ui_helpers_socket__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(170),_sogebot_ui_helpers_socket__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(_sogebot_ui_helpers_socket__WEBPACK_IMPORTED_MODULE_17__);function _createForOfIteratorHelper(_,e){var r="undefined"!=typeof Symbol&&_[Symbol.iterator]||_["@@iterator"];if(!r){if(Array.isArray(_)||(r=_unsupportedIterableToArray(_))||e&&_&&"number"==typeof _.length){r&&(_=r);var i=0,o=function(){};return{s:o,n:function(){return i>=_.length?{done:!0}:{done:!1,value:_[i++]}},e:function(_){throw _},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var t,n=!0,c=!1;return{s:function(){r=r.call(_)},n:function(){var _=r.next();return n=_.done,_},e:function(_){c=!0,t=_},f:function(){try{n||null==r.return||r.return()}finally{if(c)throw t}}}}function _unsupportedIterableToArray(_,e){if(_){if("string"==typeof _)return _arrayLikeToArray(_,e);var r=Object.prototype.toString.call(_).slice(8,-1);return"Object"===r&&_.constructor&&(r=_.constructor.name),"Map"===r||"Set"===r?Array.from(_):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(_,e):void 0}}function _arrayLikeToArray(_,e){(null==e||e>_.length)&&(e=_.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=_[i];return r}var __sfc_main={};__sfc_main.props={opts:Object},__sfc_main.setup=function(__props,__ctx){var _useNuxtApp=Object(_app__WEBPACK_IMPORTED_MODULE_0__.useNuxtApp)(),$store=_useNuxtApp.$store,props=__props,nonParsedText=Object(_vue_composition_api__WEBPACK_IMPORTED_MODULE_1__.ref)(""),text=Object(_vue_composition_api__WEBPACK_IMPORTED_MODULE_1__.ref)(""),js=Object(_vue_composition_api__WEBPACK_IMPORTED_MODULE_1__.ref)(null),css=Object(_vue_composition_api__WEBPACK_IMPORTED_MODULE_1__.ref)(null),external=Object(_vue_composition_api__WEBPACK_IMPORTED_MODULE_1__.ref)(!1),onChange=function onChange(){js.value&&(console.group("onChange()"),console.log(js.value),console.groupEnd(),eval(js.value+';if (typeof onChange === "function") { onChange(); }'))},refresh=function(){return new Promise((function(_){var e;console.debug("".concat(Date().toLocaleString()," - refresh()")),null!==(e=props.opts)&&void 0!==e&&e.id?Object(_sogebot_ui_helpers_socket__WEBPACK_IMPORTED_MODULE_17__.getSocket)("/registries/text",!0).emit("generic::getOne",{id:props.opts.id,parseText:!0},(function(e,r){if(e)return console.error(e);var o;if(!r)return console.warn("No text overlay found with id "+(null===(o=props.opts)||void 0===o?void 0:o.id));if(!external.value){if(r.external){var t,n=_createForOfIteratorHelper(r.external);try{for(n.s();!(t=n.n()).done;){var link=t.value,script=document.createElement("script");script.src=link,document.getElementsByTagName("head")[0].appendChild(script)}}catch(e){n.e(e)}finally{n.f()}}external.value=!0}setTimeout((function(){var e=""!==text.value&&text.value!==r.parsedText;nonParsedText.value=r.text,text.value=r.parsedText,Object(_vue_composition_api__WEBPACK_IMPORTED_MODULE_1__.nextTick)((function(){!js.value&&r.js&&(js.value=r.js),!css.value&&r.css&&(css.value=r.css),e&&onChange(),_(!0)}))}),100)})):(console.error("Missing id param in url"),_(!0))}))};return Object(_vue_composition_api__WEBPACK_IMPORTED_MODULE_1__.onMounted)(Object(_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_11__.a)(regeneratorRuntime.mark((function _(){return regeneratorRuntime.wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return console.log("====== TEXT REGISTRY ======"),_.next=3,refresh();case 3:Object(_sogebot_ui_helpers_socket__WEBPACK_IMPORTED_MODULE_17__.getSocket)("/registries/text",!0).on("variable-changed",(function(_){nonParsedText.value.includes(_)&&(console.log("Variable ".concat(_," changed. Refreshing.")),refresh())}));case 4:case"end":return _.stop()}}),_)})))),Object(_vue_composition_api__WEBPACK_IMPORTED_MODULE_1__.watch)(css,(function(_){var head=document.getElementsByTagName("head")[0],style=document.createElement("style");style.type="text/css",style.styleSheet?style.styleSheet.cssText=_:style.appendChild(document.createTextNode(_)),head.appendChild(style)})),Object(_vue_composition_api__WEBPACK_IMPORTED_MODULE_1__.watch)(js,function(){var _ref2=Object(_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_11__.a)(regeneratorRuntime.mark((function _callee2(val){return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,new Promise((function(_){!function e(){$store.state.isUILoaded?_(!0):setTimeout((function(){return e()}),10)}()}));case 2:console.log(),console.group("onLoad()"),console.log(val),console.groupEnd(),eval(val+';if (typeof onLoad === "function") { onLoad(); }');case 7:case"end":return _context2.stop()}}),_callee2)})));return function(_){return _ref2.apply(this,arguments)}}()),{$store:$store,text:text}},__webpack_exports__.a=__sfc_main},741:function(_,e,r){"use strict";r.r(e);var o=r(485).a,t=r(95),component=Object(t.a)(o,(function(){var _=this,e=_.$createElement,r=_._self._c||e;return _.$store.state.isUILoaded?r("div",{attrs:{id:"main"},domProps:{innerHTML:_._s(_.text)}}):_._e()}),[],!1,null,null,null);e.default=component.exports}}]);