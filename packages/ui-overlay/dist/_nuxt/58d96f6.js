(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{1031:function(e,t,n){"use strict";n.r(t);var o=n(3),meta=n(487),r=(n(26),n(22),n(27),n(11),n(41),n(23),n(47),n(12)),c=(n(70),n(170)),l=n(307);function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function f(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var d={};d.props={opts:Object},d.setup=function(e,t){var n="",r=e,v=Object(o.ref)(Object(l.defaults)(r.opts,{voice:"UK English Female",volume:50,rate:1,pitch:1,triggerTTSByHighlightedMessage:!1})),d=Object(o.ref)(!1),O=Object(o.ref)(null),j=Object(o.ref)(!1);Object(meta.useMeta)((function(){return O.value&&n!==O.value?(n=O.value,setTimeout((function(){y()}),1e3),{script:[{hid:"responsivevoice",src:"https://code.responsivevoice.org/responsivevoice.js?key="+O.value}]}):{}}));var h={0:function(){return void 0!==window.responsiveVoice&&window.responsiveVoice.isPlaying()},1:function(){return j.value},2:function(){return j.value}},w=function e(data){!data.highlight||v.value.triggerTTSByHighlightedMessage?d.value?h[data.service]()?setTimeout((function(){return e(data)}),1e3):0===data.service?window.responsiveVoice.speak(data.text,v.value.voice,{rate:v.value.rate,pitch:v.value.pitch,volume:v.value.volume}):1===data.service?(j.value=!0,Object(c.getSocket)("/core/tts",!0).emit("speak",f(f({},v.value),{},{key:data.key,text:data.text}),(function(e,t){if(e)return j.value=!1,console.error(e);var n=new Audio("data:audio/mp3;base64,"+t);n.play(),n.onended=function(){return j.value=!1}}))):2===data.service&&(j.value=!0,Object(c.getSocket)("/core/tts",!0).emit("speak",f(f({},v.value),{},{text:data.text}),(function(e,t){if(e)return j.value=!1,console.error(e);var n=new Audio(t);n.play(),n.onended=function(){return j.value=!1}}))):console.error("TTS is not properly set, skipping"):console.debug("This TTS is not set for higlighted messages.")},y=function e(){void 0!==window.responsiveVoice?(window.responsiveVoice.init(),console.debug("= ResponsiveVoice init OK"),d.value=!0):setTimeout((function(){return e()}),200)};return Object(o.onMounted)((function(){console.log("====== TTS ======"),Object(c.getSocket)("/overlays/texttospeech",!0).on("speak",(function(data){console.debug("Incoming speak",data),0===data.service?O.value=data.key:(O.value=null,d.value=!0),w(data)}))})),{}};var O=d,j=n(95),component=Object(j.a)(O,(function(){var e=this.$createElement;return(this._self._c||e)("div")}),[],!1,null,null,null);t.default=component.exports},487:function(e,t,n){"use strict";n.r(t);var o=n(114);n.d(t,"useMeta",(function(){return o.a}))}}]);