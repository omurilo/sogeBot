(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{1024:function(t,e,n){"use strict";n.r(e);var o=n(3),r=(n(26),n(22),n(27),n(41),n(23),n(47),n(12)),c=(n(70),n(234),n(11),n(72),n(170)),f=n(471),l=n(307);function m(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var O={};O.props={opts:Object},O.setup=function(t,e){var n=t,r=Object(o.ref)(Object(l.defaults)(n.opts,{emotesSize:3,numOfEmotesPerExplosion:10,animationTime:1e3,numOfExplosions:5})),m=Object(o.ref)([]);Object(o.onMounted)((function(){console.log("====== EMOTES FIREWORKS ======"),Object(c.getSocket)("/services/twitch",!0).on("emote.firework",(function(t){return w(t)})),setInterval((function(){v(),O()}),100)}));var O=function(){Object(l.every)(m.value,(function(t){return t.animation.finished}))&&(m.value=[])},v=function(){for(var t=function(i,t){!m.value[i].animation.running&&Date.now()-m.value[i].trigger>0&&(m.value[i].show=!0,Object(o.nextTick)((function(){m.value[i].animation.running=!0})))},i=0,e=m.value.length;i<e;i++)t(i)},w=function(t){for(var i=0;i<r.value.numOfExplosions;i++)for(var e=Object(l.random)(200,window.innerHeight-200),n=Object(l.random)(200,window.innerWidth-200),o=Date.now()+Object(l.random)(3e3),c=Object(l.sample)(t.emotes)[r.value.emotesSize],f=0;f<r.value.numOfEmotesPerExplosion;f++)m.value.push({id:Math.random().toString(36).substr(2,9)+"-"+Math.random().toString(36).substr(2,9),trigger:o,show:!1,animation:{type:"firework",time:r.value.animationTime,running:!1,finished:!1},position:{left:n,top:e},url:c})};return{emotes:m,doAnimation:function(t,e){var n=t.id,o=m.value.find((function(t){return t.id===n})),r={top:Object(l.random)(o.position.top-100,o.position.top+100),left:Object(l.random)(o.position.left-100,o.position.left+100),opacity:0};f.default.to(t,d(d({duration:m.value.find((function(t){return t.id===n})).animation.time/1e3},r),{},{onComplete:function(){m.value.find((function(t){return t.id===n})).animation.finished=!0,e()}}))}}};var v=O,w=n(95),component=Object(w.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"emotes"}},t._l(t.emotes,(function(e){return n("transition",{key:e.id,attrs:{name:e.animation.type,duration:e.animation.time,css:!1},on:{leave:t.doAnimation}},[e.animation.finished?t._e():n("img",{directives:[{name:"show",rawName:"v-show",value:e.show&&!e.animation.running,expression:"e.show && !e.animation.running"}],staticStyle:{position:"absolute"},style:{left:e.position.left+"px",top:e.position.top+"px"},attrs:{id:e.id,src:e.url}})])})),1)}),[],!1,null,null,null);e.default=component.exports}}]);