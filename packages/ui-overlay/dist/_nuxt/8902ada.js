(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{1027:function(t,e,o){"use strict";o.r(e);var n=o(3),r=(o(11),o(43),o(38),o(472),o(308),o(70),o(26),o(27),o(24),o(50),o(237),o(112),o(44),o(36),o(66),o(22),o(49),o(59),o(240)),l=o(170),c=o(326),d=o.n(c),v=o(488),f=o.n(v);function m(t,e){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=function(t,e){if(!t)return;if("string"==typeof t)return y(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);"Object"===o&&t.constructor&&(o=t.constructor.name);if("Map"===o||"Set"===o)return Array.from(t);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return y(t,e)}(t))||e&&t&&"number"==typeof t.length){o&&(t=o);var i=0,n=function(){};return{s:n,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,c=!1;return{s:function(){o=o.call(t)},n:function(){var t=o.next();return l=t.done,t},e:function(t){c=!0,r=t},f:function(){try{l||null==o.return||o.return()}finally{if(c)throw r}}}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}var h={};h.props={opts:Object},h.setup=function(t,e){var o,c=t,v=!!new URL(location.href).searchParams.get("debug"),f=Object(n.ref)(null),y=Object(n.ref)([]),h=Object(n.ref)([]),_=Object(n.ref)(0),w=Object(n.ref)(0),x=Object(n.ref)("!vote"),k=Object(n.ref)(null!==(o=c.opts)&&void 0!==o?o:{theme:"light",hideAfterInactivity:!1,inactivityTime:5e3,pitch:1,align:"top"});Object(n.onMounted)((function(){console.log("====== POLLS ======"),C(),setInterval((function(){return w.value=Date.now()}),100),Object(l.getSocket)("/overlays/polls",!0).emit("getVoteCommand",(function(t){return x.value=t}))}));var j=Object(n.computed)((function(){return w.value-_.value})),O=Object(n.computed)((function(){return new Date(f.value.openedAt).getTime()})),T=Object(n.computed)((function(){for(var t=0,i=0,e=y.value.length;i<e;i++)t+=y.value[i].votes;return t}));Object(n.watch)(y,(function(t){if(f.value&&"undefined"!==f.value.options){for(var e=function(){var e,r=n[o],l=0,c=0,d=m(t.filter((function(t){return String(t.option)===r})));try{for(d.s();!(e=d.n()).done;){l+=e.value.votes}}catch(t){d.e(t)}finally{d.f()}var v,f=m(h.value.filter((function(t){return String(t.option)===r})));try{for(f.s();!(v=f.n()).done;){c+=v.value.votes}}catch(t){f.e(t)}finally{f.f()}c!==l&&(_.value=Date.now())},o=0,n=Object.keys(f.value.options);o<n.length;o++)e();h.value=t}else h.value=[]}));var C=function t(){Object(l.getSocket)("/overlays/polls",!0).emit("data",(function(e,o){null===f.value&&(_.value=Date.now()),y.value=o,f.value=e,setTimeout((function(){return t()}),5e3)}))};return{dayjs:r.dayjs,translate:d.a,isDebug:v,currentVote:f,votes:y,voteCommand:x,settings:k,inactivityTime:j,activeTime:O,totalVotes:T,getTheme:function(t){return t.replace(/ /g,"_").toLowerCase().replace(/\W/g,"")},getPercentage:function(t,e){for(var o=0,i=0,n=y.value.length;i<n;i++)y.value[i].option===t&&(o+=y.value[i].votes);return Number(100/T.value*o||0).toFixed(e||0)}}},h.components=Object.assign({JsonViewer:f.a},h.components);var _=h,w=(o(981),o(983),o(95)),component=Object(w.a)(_,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{height:"100%",display:"flex"}},[t.isDebug?o("div",[o("json-viewer",{attrs:{value:{currentVote:t.currentVote,votes:t.votes,settings:t.settings,shouldShow:t.settings.hideAfterInactivity&&t.inactivityTime<t.settings.inactivityTime,inactivityTime:t.inactivityTime},boxed:"",copyable:"","expand-depth":10}})],1):t._e(),t._v(" "),o("transition",{attrs:{name:"fade"}},[null!==t.currentVote?o("div",{directives:[{name:"show",rawName:"v-show",value:!t.settings.hideAfterInactivity||t.settings.hideAfterInactivity&&t.inactivityTime<t.settings.inactivityTime,expression:"!settings.hideAfterInactivity || (settings.hideAfterInactivity && inactivityTime < settings.inactivityTime)"}],class:[t.getTheme(t.settings.theme)],staticStyle:{display:"inline-block",width:"100%"},style:{"align-self":"top"===t.settings.align?"flex-start":"flex-end"},attrs:{id:"box"}},[o("strong",{staticClass:"title"},[t._v(t._s(t.currentVote.title))]),t._v(" "),"normal"===t.currentVote.type?o("div",{staticClass:"helper"},[t._v("\n        "+t._s(t.translate("systems.polls.overlay.type"))+" "),o("kbd",[t._v(t._s(t.voteCommand)+" 1")]),t._v(", "),o("kbd",[t._v(t._s(t.voteCommand)+" 2")]),t._v(",\n        "+t._s(t.translate("systems.polls.overlay.inChatToVote"))+"\n      ")]):"numbers"===t.currentVote.type?o("div",{staticClass:"helper"},[t._v("\n        "+t._s(t.translate("systems.polls.overlay.type"))+" "),o("kbd",[t._v("1")]),t._v(", "),o("kbd",[t._v("2")]),t._v(",\n        "+t._s(t.translate("systems.polls.overlay.inChatToVote"))+"\n      ")]):"tips"===t.currentVote.type?o("div",{staticClass:"helper"},[t._v("\n        "+t._s(t.translate("systems.polls.overlay.add"))+" "),o("kbd",[t._v("#vote1")]),t._v(", "),o("kbd",[t._v("#vote2")]),t._v(", "),o("span",{domProps:{innerHTML:t._s(t.translate("systems.polls.overlay.toYourMessage").replace("$type",t.translate("systems.polls.overlay.tips")))}})]):o("div",{staticClass:"helper"},[t._v("\n        "+t._s(t.translate("systems.polls.overlay.add"))+" "),o("kbd",[t._v("#vote1")]),t._v(", "),o("kbd",[t._v("#vote2")]),t._v(", "),o("span",{domProps:{innerHTML:t._s(t.translate("systems.polls.overlay.toYourMessage").replace("$type",t.translate("systems.polls.overlay.bits")))}})]),t._v(" "),t._l(t.currentVote.options,(function(option,e){return o("div",{key:option,staticClass:"options",class:[0===e?"first":"",e===t.currentVote.options.length-1?"last":""]},[o("div",{staticClass:"numbers"},[t._v("\n          "+t._s(e+1)+"\n        ")]),t._v(" "),o("div",{staticStyle:{width:"100%"}},[o("div",[t._v(t._s(option))]),t._v(" "),o("div",{staticClass:"background-bar"}),t._v(" "),o("div",{staticClass:"bar",style:{width:"0"===t.getPercentage(e)?"5px":t.getPercentage(e)+"%"}})]),t._v(" "),o("div",{staticClass:"percentage"},[t._v("\n          "+t._s(t.getPercentage(e,1))+"%\n        ")])])})),t._v(" "),o("div",{attrs:{id:"footer"}},[o("div",{staticStyle:{width:"100%"}},[t._v("\n          "+t._s(t.translate("systems.polls.totalVotes"))+"\n          "),"tips"!==t.currentVote.type?o("strong",[t._v(t._s(t.totalVotes))]):o("strong",[t._v(t._s(Number(t.totalVotes).toFixed(1)))])]),t._v(" "),o("div",{staticStyle:{width:"100%"}},[t._v("\n          "+t._s(t.translate("systems.polls.activeFor"))+" "),o("strong",[t._v(t._s(t.dayjs().from(t.dayjs(t.activeTime),!0)))])])])],2):t._e()])],1)}),[],!1,null,"013f2d3c",null);e.default=component.exports},734:function(t,e,o){var content=o(982);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(111).default)("46998ec2",content,!0,{sourceMap:!1})},735:function(t,e,o){var content=o(984);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(111).default)("62960957",content,!0,{sourceMap:!1})},981:function(t,e,o){"use strict";o(734)},982:function(t,e,o){var n=o(110)((function(i){return i[1]}));n.push([t.i,"#overlays{height:100%}",""]),n.locals={},t.exports=n},983:function(t,e,o){"use strict";o(735)},984:function(t,e,o){var n=o(110)((function(i){return i[1]}));n.push([t.i,"@import url(https://fonts.googleapis.com/css?family=Barlow);"]),n.push([t.i,"@import url(https://fonts.googleapis.com/css?family=Barlow+Condensed);"]),n.push([t.i,".hide[data-v-013f2d3c]{display:none}#box[data-v-013f2d3c]{font-family:Barlow,sans-serif;padding:.5rem 1rem;margin:1.5rem}.title[data-v-013f2d3c]{font-size:1.2rem}.helper[data-v-013f2d3c]{text-align:center;padding-top:.5rem}#footer[data-v-013f2d3c],.options[data-v-013f2d3c]{width:100%;display:flex;padding:.5rem 0}.options.first[data-v-013f2d3c]{padding-top:1rem}.options.last[data-v-013f2d3c]{padding-bottom:1rem}#footer[data-v-013f2d3c]{text-align:center}.numbers[data-v-013f2d3c]{padding:0 1rem 0 0;width:1%}.percentage[data-v-013f2d3c]{padding:0;width:80;text-align:right}.background-bar[data-v-013f2d3c],.bar[data-v-013f2d3c]{position:relative;top:.5rem;height:.5rem;width:100%}.bar[data-v-013f2d3c]{position:relative;top:0;background-color:#cfcfcf}.fade-enter-active[data-v-013f2d3c],.fade-leave-active[data-v-013f2d3c]{transition:opacity 1s}.fade-enter[data-v-013f2d3c],.fade-leave-to[data-v-013f2d3c]{opacity:0}#box.light[data-v-013f2d3c]{background-color:#f0f1f4;color:#202020;box-shadow:0 0 2rem #000}#box.light .background-bar[data-v-013f2d3c]{background-color:#cfcfcf}#box.light .bar[data-v-013f2d3c]{background-color:#8a8a8a}#box.dark[data-v-013f2d3c]{background-color:#202020;color:#f0f1f4;box-shadow:0 0 2rem #000}#box.dark .background-bar[data-v-013f2d3c]{background-color:#8a8a8a}#box.dark .bar[data-v-013f2d3c]{background-color:#cfcfcf}#box.soges_green[data-v-013f2d3c]{background-color:rgba(0,0,0,.8);color:#f0f1f4;border-top:5px solid #acd301;border-bottom:5px solid #acd301}#box.soges_green .bar[data-v-013f2d3c]{background-color:#acd301}#box.soges_green .numbers[data-v-013f2d3c]{color:#acd301;font-size:2rem;font-weight:700;padding-right:2rem}#box.soges_green #footer strong[data-v-013f2d3c]{color:#acd301}",""]),n.locals={},t.exports=n}}]);